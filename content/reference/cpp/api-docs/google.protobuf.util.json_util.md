+++
title = "json_util.h"
toc_hide = "true"
linkTitle = "C++"
description = "This section contains reference documentation for working with protocol buffer classes in C++."
type = "docs"
+++

<p><code>#include &lt;google/protobuf/util/json_util.h&gt;<br>namespace <a href="#google.protobuf.util">google::protobuf::util</a></code></p><p>Utility functions to convert between protobuf binary format and proto3 JSON format. </p><table width="100%"><tr><th colspan="2"><h3 style="margin-top: 4px">Classes in this file</h3></th></tr><tr><td><div><code><a href="#JsonParseOptions">JsonParseOptions</a></code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;"></div></td></tr><tr><td><div><code><a href="#JsonPrintOptions">JsonPrintOptions</a></code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;"></div></td></tr></table><table><tr><th colspan="2"><h3 style="margin-top: 4px">File Members</h3><div style="font-style: italic; font-weight: normal;">These definitions are not part of any class.</div></th></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>typedef</code></td><td style="border-left-width: 0px"id="JsonOptions"><div style="padding-left: 16px; text-indent: -16px"><code><a href='#JsonPrintOptions'>JsonPrintOptions</a> <b>JsonOptions</b></code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">DEPRECATED. Use <a href='#JsonPrintOptions'>JsonPrintOptions</a> instead. </div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>util::Status</code></td><td style="border-left-width: 0px"id="MessageToJsonString"><div style="padding-left: 16px; text-indent: -16px"><code><b>MessageToJsonString</b>(const <a href='google.protobuf.message#Message'>Message</a> &amp; message, std::string * output, const <a href='#JsonOptions'>JsonOptions</a> &amp; options)</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">Converts from protobuf message to JSON and appends it to |output|.  <a href="#MessageToJsonString.details">more...</a></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>util::Status</code></td><td style="border-left-width: 0px"id="MessageToJsonString"><div style="padding-left: 16px; text-indent: -16px"><code><b>MessageToJsonString</b>(const <a href='google.protobuf.message#Message'>Message</a> &amp; message, std::string * output)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>util::Status</code></td><td style="border-left-width: 0px"id="JsonStringToMessage"><div style="padding-left: 16px; text-indent: -16px"><code><b>JsonStringToMessage</b>(StringPiece input, <a href='google.protobuf.message#Message'>Message</a> * message, const <a href='#JsonParseOptions'>JsonParseOptions</a> &amp; options)</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">Converts from JSON to protobuf message.  <a href="#JsonStringToMessage.details">more...</a></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>util::Status</code></td><td style="border-left-width: 0px"id="JsonStringToMessage"><div style="padding-left: 16px; text-indent: -16px"><code><b>JsonStringToMessage</b>(StringPiece input, <a href='google.protobuf.message#Message'>Message</a> * message)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>util::Status</code></td><td style="border-left-width: 0px"id="BinaryToJsonStream"><div style="padding-left: 16px; text-indent: -16px"><code><b>BinaryToJsonStream</b>(<a href='google.protobuf.util.type_resolver#TypeResolver'>TypeResolver</a> * resolver, const std::string &amp; type_url, <a href='google.protobuf.io.zero_copy_stream#ZeroCopyInputStream'>io::ZeroCopyInputStream</a> * binary_input, <a href='google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream'>io::ZeroCopyOutputStream</a> * json_output, const <a href='#JsonPrintOptions'>JsonPrintOptions</a> &amp; options)</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">Converts protobuf binary data to JSON.  <a href="#BinaryToJsonStream.details">more...</a></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>util::Status</code></td><td style="border-left-width: 0px"id="BinaryToJsonStream"><div style="padding-left: 16px; text-indent: -16px"><code><b>BinaryToJsonStream</b>(<a href='google.protobuf.util.type_resolver#TypeResolver'>TypeResolver</a> * resolver, const std::string &amp; type_url, <a href='google.protobuf.io.zero_copy_stream#ZeroCopyInputStream'>io::ZeroCopyInputStream</a> * binary_input, <a href='google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream'>io::ZeroCopyOutputStream</a> * json_output)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>util::Status</code></td><td style="border-left-width: 0px"id="BinaryToJsonString"><div style="padding-left: 16px; text-indent: -16px"><code><b>BinaryToJsonString</b>(<a href='google.protobuf.util.type_resolver#TypeResolver'>TypeResolver</a> * resolver, const std::string &amp; type_url, const std::string &amp; binary_input, std::string * json_output, const <a href='#JsonPrintOptions'>JsonPrintOptions</a> &amp; options)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>util::Status</code></td><td style="border-left-width: 0px"id="BinaryToJsonString"><div style="padding-left: 16px; text-indent: -16px"><code><b>BinaryToJsonString</b>(<a href='google.protobuf.util.type_resolver#TypeResolver'>TypeResolver</a> * resolver, const std::string &amp; type_url, const std::string &amp; binary_input, std::string * json_output)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>util::Status</code></td><td style="border-left-width: 0px"id="JsonToBinaryStream"><div style="padding-left: 16px; text-indent: -16px"><code><b>JsonToBinaryStream</b>(<a href='google.protobuf.util.type_resolver#TypeResolver'>TypeResolver</a> * resolver, const std::string &amp; type_url, <a href='google.protobuf.io.zero_copy_stream#ZeroCopyInputStream'>io::ZeroCopyInputStream</a> * json_input, <a href='google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream'>io::ZeroCopyOutputStream</a> * binary_output, const <a href='#JsonParseOptions'>JsonParseOptions</a> &amp; options)</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">Converts JSON data to protobuf binary format.  <a href="#JsonToBinaryStream.details">more...</a></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>util::Status</code></td><td style="border-left-width: 0px"id="JsonToBinaryStream"><div style="padding-left: 16px; text-indent: -16px"><code><b>JsonToBinaryStream</b>(<a href='google.protobuf.util.type_resolver#TypeResolver'>TypeResolver</a> * resolver, const std::string &amp; type_url, <a href='google.protobuf.io.zero_copy_stream#ZeroCopyInputStream'>io::ZeroCopyInputStream</a> * json_input, <a href='google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream'>io::ZeroCopyOutputStream</a> * binary_output)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>util::Status</code></td><td style="border-left-width: 0px"id="JsonToBinaryString"><div style="padding-left: 16px; text-indent: -16px"><code><b>JsonToBinaryString</b>(<a href='google.protobuf.util.type_resolver#TypeResolver'>TypeResolver</a> * resolver, const std::string &amp; type_url, StringPiece json_input, std::string * binary_output, const <a href='#JsonParseOptions'>JsonParseOptions</a> &amp; options)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>util::Status</code></td><td style="border-left-width: 0px"id="JsonToBinaryString"><div style="padding-left: 16px; text-indent: -16px"><code><b>JsonToBinaryString</b>(<a href='google.protobuf.util.type_resolver#TypeResolver'>TypeResolver</a> * resolver, const std::string &amp; type_url, StringPiece json_input, std::string * binary_output)</code></div></td></tr></table> <hr><h3 id="MessageToJsonString.details"><code>util::Status util::MessageToJsonString(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='google.protobuf.message#Message'>Message</a> &amp; message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * output,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='#JsonOptions'>JsonOptions</a> &amp; options)</code></h3><div style="margin-left: 16px"><p>Converts from protobuf message to JSON and appends it to |output|. </p><p>This is a simple wrapper of BinaryToJsonString(). It will use the <a href='google.protobuf.descriptor#DescriptorPool'>DescriptorPool</a> of the passed-in message to resolve Any types. </p>
</div> <hr><h3 id="JsonStringToMessage.details"><code>util::Status util::JsonStringToMessage(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringPiece input,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='google.protobuf.message#Message'>Message</a> * message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='#JsonParseOptions'>JsonParseOptions</a> &amp; options)</code></h3><div style="margin-left: 16px"><p>Converts from JSON to protobuf message. </p><p>This is a simple wrapper of JsonStringToBinary(). It will use the <a href='google.protobuf.descriptor#DescriptorPool'>DescriptorPool</a> of the passed-in message to resolve Any types. </p>
</div> <hr><h3 id="BinaryToJsonStream.details"><code>util::Status util::BinaryToJsonStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='google.protobuf.util.type_resolver#TypeResolver'>TypeResolver</a> * resolver,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string &amp; type_url,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='google.protobuf.io.zero_copy_stream#ZeroCopyInputStream'>io::ZeroCopyInputStream</a> * binary_input,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream'>io::ZeroCopyOutputStream</a> * json_output,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='#JsonPrintOptions'>JsonPrintOptions</a> &amp; options)</code></h3><div style="margin-left: 16px"><p>Converts protobuf binary data to JSON. </p><p>The conversion will fail if: </p>

<pre>1. TypeResolver fails to resolve a type.
2. input is not valid protobuf wire format, or conflicts with the type
   information returned by TypeResolver.</pre>

<p> Note that unknown fields will be discarded silently. </p>
</div> <hr><h3 id="JsonToBinaryStream.details"><code>util::Status util::JsonToBinaryStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='google.protobuf.util.type_resolver#TypeResolver'>TypeResolver</a> * resolver,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string &amp; type_url,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='google.protobuf.io.zero_copy_stream#ZeroCopyInputStream'>io::ZeroCopyInputStream</a> * json_input,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream'>io::ZeroCopyOutputStream</a> * binary_output,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='#JsonParseOptions'>JsonParseOptions</a> &amp; options)</code></h3><div style="margin-left: 16px"><p>Converts JSON data to protobuf binary format. </p><p>The conversion will fail if: </p>

<pre>1. TypeResolver fails to resolve a type.
2. input is not valid JSON format, or conflicts with the type
   information returned by TypeResolver.</pre>

</div><h2 id="JsonParseOptions">struct JsonParseOptions</h2><p><code>#include &lt;<a href="#">google/protobuf/util/json_util.h</a>&gt;<br>namespace <a href="#google.protobuf.util">google::protobuf::util</a></code></p><p></p><table><tr><th colspan="2"><h3 style="margin-top: 4px">Members</h3></th></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>bool</code></td><td style="border-left-width: 0px"id="JsonParseOptions.ignore_unknown_fields"><div style="padding-left: 16px; text-indent: -16px"><code><b>ignore_unknown_fields</b></code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">Whether to ignore unknown JSON fields during parsing. </div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>bool</code></td><td style="border-left-width: 0px"id="JsonParseOptions.case_insensitive_enum_parsing"><div style="padding-left: 16px; text-indent: -16px"><code><b>case_insensitive_enum_parsing</b></code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">If true, when a lowercase enum value fails to parse, try to convert it to UPPER_CASE and see if it matches a valid enum.  <a href="#JsonParseOptions.case_insensitive_enum_parsing.details">more...</a></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code></code></td><td style="border-left-width: 0px"id="JsonParseOptions.JsonParseOptions"><div style="padding-left: 16px; text-indent: -16px"><code><b>JsonParseOptions</b>()</code></div></td></tr></table> <hr><h3 id="JsonParseOptions.case_insensitive_enum_parsing.details"><code>bool JsonParseOptions::case_insensitive_enum_parsing</code></h3><div style="margin-left: 16px"><p>If true, when a lowercase enum value fails to parse, try convert it to UPPER_CASE and see if it matches a valid enum. </p><p>WARNING: This option exists only to preserve legacy behavior. Avoid using this option. If your enum needs to support different casing, consider using allow_alias instead. </p>
</div><h2 id="JsonPrintOptions">struct JsonPrintOptions</h2><p><code>#include &lt;<a href="#">google/protobuf/util/json_util.h</a>&gt;<br>namespace <a href="#google.protobuf.util">google::protobuf::util</a></code></p><p></p><table><tr><th colspan="2"><h3 style="margin-top: 4px">Members</h3></th></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>bool</code></td><td style="border-left-width: 0px"id="JsonPrintOptions.add_whitespace"><div style="padding-left: 16px; text-indent: -16px"><code><b>add_whitespace</b></code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">Whether to add spaces, line breaks and indentation to make the JSON output easy to read. </div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>bool</code></td><td style="border-left-width: 0px"id="JsonPrintOptions.always_print_primitive_fields"><div style="padding-left: 16px; text-indent: -16px"><code><b>always_print_primitive_fields</b></code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">Whether to always print primitive fields.  <a href="#JsonPrintOptions.always_print_primitive_fields.details">more...</a></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>bool</code></td><td style="border-left-width: 0px"id="JsonPrintOptions.always_print_enums_as_ints"><div style="padding-left: 16px; text-indent: -16px"><code><b>always_print_enums_as_ints</b></code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">Whether to always print enums as ints.  <a href="#JsonPrintOptions.always_print_enums_as_ints.details">more...</a></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>bool</code></td><td style="border-left-width: 0px"id="JsonPrintOptions.preserve_proto_field_names"><div style="padding-left: 16px; text-indent: -16px"><code><b>preserve_proto_field_names</b></code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">Whether to preserve proto field names. </div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code></code></td><td style="border-left-width: 0px"id="JsonPrintOptions.JsonPrintOptions"><div style="padding-left: 16px; text-indent: -16px"><code><b>JsonPrintOptions</b>()</code></div></td></tr></table> <hr><h3 id="JsonPrintOptions.always_print_primitive_fields.details"><code>bool JsonPrintOptions::always_print_primitive_fields</code></h3><div style="margin-left: 16px"><p>Whether to always print primitive fields. </p><p>By default proto3 primitive fields with default values will be omitted in JSON output. For example, an int32 field set to 0 will be omitted. Set this flag to true will override the default behavior and print primitive fields regardless of their values. </p>
</div> <hr><h3 id="JsonPrintOptions.always_print_enums_as_ints.details"><code>bool JsonPrintOptions::always_print_enums_as_ints</code></h3><div style="margin-left: 16px"><p>Whether to always print enums as ints. </p><p>By default they are rendered as strings. </p>
</div>
