<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>zero_copy_stream_iml_lite.h | Protocol Buffers Documentation</title>
<meta name=description content="This section contains reference documentation for working with protocol buffer classes in C++."><meta property="og:title" content="zero_copy_stream_iml_lite.h"><meta property="og:description" content="This section contains reference documentation for working with protocol buffer classes in C++."><meta property="og:type" content="article"><meta property="og:url" content="https://protobuf.dev/reference/cpp/api-docs/google.protobuf.io.zero_copy_stream_impl_lite/"><meta property="article:section" content="reference"><meta itemprop=name content="zero_copy_stream_iml_lite.h"><meta itemprop=description content="This section contains reference documentation for working with protocol buffer classes in C++."><meta itemprop=wordCount content="3445"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="zero_copy_stream_iml_lite.h"><meta name=twitter:description content="This section contains reference documentation for working with protocol buffer classes in C++."><link rel=preload href=/scss/main.min.27bc098c9a8f7a1246d474f5c8afcee53760c9c7f38125d343ff52e0bf493011.css as=style integrity="sha256-J7wJjJqPehJG1HT1yK/O5TdgycfzgSXTQ/9S4L9JMBE=" crossorigin=anonymous><link href=/scss/main.min.27bc098c9a8f7a1246d474f5c8afcee53760c9c7f38125d343ff52e0bf493011.css rel=stylesheet integrity="sha256-J7wJjJqPehJG1HT1yK/O5TdgycfzgSXTQ/9S4L9JMBE=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-5L8P8GRN4Y"></script><script>var doNotTrack=!1,dnt;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-5L8P8GRN4Y")}</script></head><body class=td-page><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>Protocol Buffers Documentation</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav></ul></div><div class="d-none d-lg-block"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="td-sidebar-nav collapse td-sidebar-nav--search-disabled" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m--li><a href=/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-><span>Protocol Buffers</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-overview-li><a href=/overview/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-overview><span>Overview</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-installation-li><a href=/installation/ title="Protocol Buffer Compiler Installation" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-installation><span>Protoc Installation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-news-li><a href=/news/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-news><span>News</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-programming-guides-li><a href=/programming-guides/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-programming-guides><span>Programming Guides</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guideseditions-li><a href=/programming-guides/editions/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guideseditions><span>Language Guide (editions)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesproto2-li><a href=/programming-guides/proto2/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesproto2><span>Language Guide (proto 2)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesproto3-li><a href=/programming-guides/proto3/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesproto3><span>Language Guide (proto 3)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesproto-limits-li><a href=/programming-guides/proto-limits/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesproto-limits><span>Proto Limits</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesstyle-li><a href=/programming-guides/style/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesstyle><span>Style Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesenum-li><a href=/programming-guides/enum/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesenum><span>Enum Behavior</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesencoding-li><a href=/programming-guides/encoding/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesencoding><span>Encoding</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesjson-li><a href=/programming-guides/json/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesjson><span>ProtoJSON Format</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidestechniques-li><a href=/programming-guides/techniques/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidestechniques><span>Techniques</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesaddons-li><a href=/programming-guides/addons/ title="Third-Party Add-ons" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesaddons><span>Add-ons</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesextension_declarations-li><a href=/programming-guides/extension_declarations/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesextension_declarations><span>Extension Declarations</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesfield_presence-li><a href=/programming-guides/field_presence/ title="Application Note: Field Presence" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesfield_presence><span>Field Presence</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesserialization-not-canonical-li><a href=/programming-guides/serialization-not-canonical/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesserialization-not-canonical><span>Proto Serialization Is Not Canonical</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesdeserialize-debug-li><a href=/programming-guides/deserialize-debug/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesdeserialize-debug><span>Deserializing Debug Proto Representations</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-editions-li><a href=/editions/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-editions><span>Protobuf Editions</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-editionsoverview-li><a href=/editions/overview/ title="Protobuf Editions Overview" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-editionsoverview><span>Overview</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-editionsfeatures-li><a href=/editions/features/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-editionsfeatures><span>Feature Settings for Editions</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-editionsimplementation-li><a href=/editions/implementation/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-editionsimplementation><span>Implementing Editions Support</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-design-decisions-li><a href=/design-decisions/ title="Protobuf Team Design Decisions" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-design-decisions><span>Design Decisions</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-design-decisionsnullable-getters-setters-li><a href=/design-decisions/nullable-getters-setters/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-design-decisionsnullable-getters-setters><span>No Nullable Setters/Getters Support</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-best-practices-li><a href=/best-practices/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-best-practices><span>Proto Best Practices</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-best-practicesno-cargo-cults-li><a href=/best-practices/no-cargo-cults/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-best-practicesno-cargo-cults><span>Avoid Cargo Culting</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-best-practicesdos-donts-li><a href=/best-practices/dos-donts/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-best-practicesdos-donts><span>Proto Best Practices</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-best-practicesapi-li><a href=/best-practices/api/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-best-practicesapi><span>API Best Practices</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-best-practices1-1-1-li><a href=/best-practices/1-1-1/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-best-practices1-1-1><span>1-1-1 Best Practice</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-getting-started-li><a href=/getting-started/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-getting-started><span>Tutorials</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedcpptutorial-li><a href=/getting-started/cpptutorial/ title="Protocol Buffer Basics: C++" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedcpptutorial><span>C++</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedcsharptutorial-li><a href=/getting-started/csharptutorial/ title="Protocol Buffer Basics: C#" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedcsharptutorial><span>C#</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-starteddarttutorial-li><a href=/getting-started/darttutorial/ title="Protocol Buffer Basics: Dart" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-starteddarttutorial><span>Dart</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedgotutorial-li><a href=/getting-started/gotutorial/ title="Protocol Buffer Basics: Go" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedgotutorial><span>Go</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedjavatutorial-li><a href=/getting-started/javatutorial/ title="Protocol Buffer Basics: Java" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedjavatutorial><span>Java</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedkotlintutorial-li><a href=/getting-started/kotlintutorial/ title="Protocol Buffer Basics: Kotlin" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedkotlintutorial><span>Kotlin</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedpythontutorial-li><a href=/getting-started/pythontutorial/ title="Protocol Buffer Basics: Python" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedpythontutorial><span>Python</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-reference-li><a href=/reference/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-reference><span>Reference Guides</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-referencecpp-li><a href=/reference/cpp/ title="C++ Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referencecpp><span>C++</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencecppcpp-generated-li><a href=/reference/cpp/cpp-generated/ title="C++ Generated Code Guide" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencecppcpp-generated><span>Generated Code Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencecppstring-view-li><a href=/reference/cpp/string-view/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencecppstring-view><span>String View APIs</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencecpparenas-li><a href=/reference/cpp/arenas/ title="C++ Arena Allocation Guide" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencecpparenas><span>Arena Allocation Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencecppabseil-li><a href=/reference/cpp/abseil/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencecppabseil><span>Abseil Support</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencecppapi-docs-link-li><a href=/reference/cpp/api-docs/ target=_blank rel=noopener class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencecppapi-docs-link><span>C++ API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencecsharp-li><a href=/reference/csharp/ title="C# Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referencecsharp><span>C#</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencecsharpcsharp-generated-li><a href=/reference/csharp/csharp-generated/ title="C# Generated Code Guide" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencecsharpcsharp-generated><span>Generated Code Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencecsharpapi-docs-link-li><a href=/reference/csharp/api-docs target=_blank rel=noopener class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencecsharpapi-docs-link><span>C# API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencedart-li><a href=/reference/dart/ title="Dart Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referencedart><span>Dart</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencedartdart-generated-li><a href=/reference/dart/dart-generated/ title="Dart Generated Code" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencedartdart-generated><span>Generated Code</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencedartapi-docs-link-li><a href=https://pub.dartlang.org/documentation/protobuf target=_blank rel=noopener class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencedartapi-docs-link><span>Dart API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencego-li><a href=/reference/go/ title="Go Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referencego><span>Go</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencegogo-generated-li><a href=/reference/go/go-generated/ title="Go Generated Code Guide (Open)" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencegogo-generated><span>Generated Code Guide (Open)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencegogo-generated-opaque-li><a href=/reference/go/go-generated-opaque/ title="Go Generated Code Guide (Opaque)" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencegogo-generated-opaque><span>Generated Code Guide (Opaque)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencegofaq-li><a href=/reference/go/faq/ title="Go FAQ" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencegofaq><span>FAQ</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencegosize-li><a href=/reference/go/size/ title="Go Size Semantics" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencegosize><span>Size Semantics</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencegoapi-docs-link-li><a href=https://pkg.go.dev/google.golang.org/protobuf/proto target=_blank rel=noopener class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencegoapi-docs-link><span>Go API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencegoopaque-migration-li><a href=/reference/go/opaque-migration/ title="Go Opaque API Migration" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencegoopaque-migration><span>Opaque API Migration</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencegoopaque-migration-manual-li><a href=/reference/go/opaque-migration-manual/ title="Go Opaque API: Manual Migration" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencegoopaque-migration-manual><span>Opaque API: Manual Migration</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencegoopaque-faq-li><a href=/reference/go/opaque-faq/ title="Go Opaque API FAQ" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencegoopaque-faq><span>Opaque API FAQ</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencejava-li><a href=/reference/java/ title="Java Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referencejava><span>Java</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencejavajava-generated-li><a href=/reference/java/java-generated/ title="Java Generated Code Guide" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencejavajava-generated><span>Generated Code Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencejavajava-proto-names-li><a href=/reference/java/java-proto-names/ title="Java Proto Names" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencejavajava-proto-names><span>Generated Proto Names</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencejavaapi-docs-link-li><a href=/reference/java/api-docs/overview-summary.html target=_blank rel=noopener class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencejavaapi-docs-link><span>Java API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencekotlin-li><a href=/reference/kotlin/ title="Kotlin Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referencekotlin><span>Kotlin</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencekotlinapi-docs-li><a href=/reference/kotlin/api-docs/ title="Kotlin Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referencekotlinapi-docs><span>Kotlin</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencekotlinkotlin-generated-li><a href=/reference/kotlin/kotlin-generated/ title="Kotlin Generated Code Guide" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencekotlinkotlin-generated><span>Generated Code Guide</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referenceobjective-c-li><a href=/reference/objective-c/ title="Objective-C Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referenceobjective-c><span>Objective-C</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceobjective-cobjective-c-generated-li><a href=/reference/objective-c/objective-c-generated/ title="Objective-C Generated Code Guide" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referenceobjective-cobjective-c-generated><span>Generated Code Guide</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencephp-li><a href=/reference/php/ title="PHP Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referencephp><span>PHP</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencephpphp-generated-li><a href=/reference/php/php-generated/ title="PHP Generated Code Guide" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencephpphp-generated><span>Generated Code Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencephpapi-docs-link-li><a href=/reference/php/api-docs/ target=_blank rel=noopener class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencephpapi-docs-link><span>PHP API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencepython-li><a href=/reference/python/ title="Python Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referencepython><span>Python</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencepythonpython-generated-li><a href=/reference/python/python-generated/ title="Python Generated Code Guide" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencepythonpython-generated><span>Generated Code Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencepythonapi-docs-link-li><a href=https://googleapis.dev/python/protobuf/latest/ target=_blank rel=noopener class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencepythonapi-docs-link><span>Python API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referenceruby-li><a href=/reference/ruby/ title="Ruby Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referenceruby><span>Ruby</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencerubyruby-generated-li><a href=/reference/ruby/ruby-generated/ title="Ruby Generated Code Guide" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencerubyruby-generated><span>Generated Code Guide</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referenceprotobuf-li><a href=/reference/protobuf/ title="Protocol Buffers Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referenceprotobuf><span>Protocol Buffers</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceprotobufedition-2023-spec-li><a href=/reference/protobuf/edition-2023-spec/ title="Protocol Buffers Edition 2023 Language Specification" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referenceprotobufedition-2023-spec><span>2023 Language Specification</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceprotobufproto2-spec-li><a href=/reference/protobuf/proto2-spec/ title="Protocol Buffers Version 2 Language Specification" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referenceprotobufproto2-spec><span>Version 2 Language Specification</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceprotobufproto3-spec-li><a href=/reference/protobuf/proto3-spec/ title="Protocol Buffers Version 3 Language Specification" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referenceprotobufproto3-spec><span>Version 3 Language Specification</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceprotobuftextformat-spec-li><a href=/reference/protobuf/textformat-spec/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referenceprotobuftextformat-spec><span>Text Format Language Specification</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceprotobufgoogleprotobuf-li><a href=/reference/protobuf/google.protobuf/ title="Protocol Buffers Well-Known Types" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referenceprotobufgoogleprotobuf><span>Well-Known Types</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceother-li><a href=/reference/other/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referenceother><span>Other Languages</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-support-li><a href=/support/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-support><span>Support</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-supportversion-support-li><a href=/support/version-support/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-supportversion-support><span>Version Support</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-supportmigration-li><a href=/support/migration/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-supportmigration><span>Migration Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-supportcross-version-runtime-guarantee-li><a href=/support/cross-version-runtime-guarantee/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-supportcross-version-runtime-guarantee><span>Cross-Version Runtime Guarantee</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-downloads-li><a href=/downloads/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-downloads><span>Downloads</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-history-li><a href=/history/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-history><span>History</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-forum-link-li><a href=https://groups.google.com/g/protobuf target=_blank rel=noopener class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-forum-link><span>Forum</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-navbar-li><a href=/navbar/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-navbar><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-search-li><a href=/search/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-search><span>Search Results</span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/protocolbuffers/protocolbuffers.github.io/tree/main/content/reference/cpp/api-docs/google.protobuf.io.zero_copy_stream_impl_lite.md class=td-page-meta--view target=_blank rel=noopener><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
<a href=https://github.com/protocolbuffers/protocolbuffers.github.io/edit/main/content/reference/cpp/api-docs/google.protobuf.io.zero_copy_stream_impl_lite.md class=td-page-meta--edit target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
<a href="https://github.com/protocolbuffers/protocolbuffers.github.io/new/main/content/reference/cpp/api-docs/google.protobuf.io.zero_copy_stream_impl_lite.md?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class=td-page-meta--child target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
<a href="https://github.com/protocolbuffers/protocolbuffers.github.io/issues/new?title=zero_copy_stream_iml_lite.h" class=td-page-meta--issue target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/protocolbuffers/protobuf/issues/new class=td-page-meta--project-issue target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/reference/>Reference Guides</a></li><li class=breadcrumb-item><a href=/reference/cpp/>C++</a></li><li class=breadcrumb-item><a href=/reference/cpp/api-docs/>C++</a></li><li class="breadcrumb-item active" aria-current=page>C++</li></ol></nav><div class=td-content><h1>zero_copy_stream_iml_lite.h</h1><div class=lead>This section contains reference documentation for working with protocol buffer classes in C++.</div><header class=article-meta></header><p><code>#include &lt;google/protobuf/io/zero_copy_stream_impl_lite.h><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>This file contains common implementations of the interfaces defined in <a href=google.protobuf.io.zero_copy_stream>zero_copy_stream.h</a> which are included in the "lite" protobuf library.</p><p>These implementations cover I/O on raw arrays and strings, as well as adaptors which make it easy to implement streams based on traditional streams. Of course, many users will probably want to write their own implementations of these interfaces specific to the particular I/O abstractions they prefer to use, but these should cover the most common cases.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#ArrayInputStream>ArrayInputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> backed by an in-memory array of bytes.</div></td></tr><tr><td><div><code><a href=#ArrayOutputStream>ArrayOutputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> backed by an in-memory array of bytes.</div></td></tr><tr><td><div><code><a href=#StringOutputStream>StringOutputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> which appends bytes to a string.</div></td></tr><tr><td><div><code><a href=#CopyingInputStream>CopyingInputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A generic traditional input stream interface.</div></td></tr><tr><td><div><code><a href=#CopyingInputStreamAdaptor>CopyingInputStreamAdaptor</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> which reads from a <a href=#CopyingInputStream>CopyingInputStream</a>.</div></td></tr><tr><td><div><code><a href=#CopyingOutputStream>CopyingOutputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A generic traditional output stream interface.</div></td></tr><tr><td><div><code><a href=#CopyingOutputStreamAdaptor>CopyingOutputStreamAdaptor</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> which writes to a <a href=#CopyingOutputStream>CopyingOutputStream</a>.</div></td></tr><tr><td><div><code><a href=#LimitingInputStream>LimitingInputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> which wraps some other stream and limits it to a particular byte count.</div></td></tr></table><table><tr><th colspan=2><h3 style=margin-top:4px>File Members</h3><div style=font-style:italic;font-weight:400>These definitions are not part of any class.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>char *</code></td><td style=border-left-width:0 id=mutable_string_data><div style=padding-left:16px;text-indent:-16px><code><b>mutable_string_data</b>(std::string * s)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Return a pointer to mutable characters underlying the given string. <a href=#mutable_string_data.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::pair&lt; char *, bool ></code></td><td style=border-left-width:0 id=as_string_data><div style=padding-left:16px;text-indent:-16px><code><b>as_string_data</b>(std::string * s)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>as_string_data(s) is equivalent to ({ char* p = mutable_string_data(s); make_pair(p, p != NULL); }) Sometimes it's faster: in some scenarios p cannot be NULL, and then the code can avoid that check.</div></td></tr></table><hr><h3 id=mutable_string_data.details><code>char * io::mutable_string_data(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * s)</code></h3><div style=margin-left:16px><p>Return a pointer to mutable characters underlying the given string.</p><p>The return value is valid until the next time the string is resized. We trust the caller to treat the return value as an array of length s->size().</p></div><h2 id=ArrayInputStream>class ArrayInputStream: public <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a></h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl_lite.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> backed by an in-memory array of bytes.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=ArrayInputStream.ArrayInputStream><div style=padding-left:16px;text-indent:-16px><code><b>ArrayInputStream</b>(const void * data, int size, int block_size = -1)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Create an InputStream that returns the bytes pointed to by "data". <a href=#ArrayInputStream.ArrayInputStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=ArrayInputStream.~ArrayInputStream><div style=padding-left:16px;text-indent:-16px><code><b>~ArrayInputStream</b>()</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=ArrayInputStream.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>(const void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Obtains a chunk of data from the stream. <a href=#ArrayInputStream.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=ArrayInputStream.BackUp><div style=padding-left:16px;text-indent:-16px><code><b>BackUp</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Backs up a number of bytes, so that the next call to <a href=#ArrayInputStream.Next>Next()</a> returns data again that was already returned by the last call to <a href=#ArrayInputStream.Next>Next()</a>. <a href=#ArrayInputStream.BackUp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=ArrayInputStream.Skip><div style=padding-left:16px;text-indent:-16px><code><b>Skip</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Skips a number of bytes. <a href=#ArrayInputStream.Skip.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int64_t</code></td><td style=border-left-width:0 id=ArrayInputStream.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes read since this object was created.</div></td></tr></table><hr><h3 id=ArrayInputStream.ArrayInputStream.details><code>ArrayInputStream::ArrayInputStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void * data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int block_size = -1)</code></h3><div style=margin-left:16px><p>Create an InputStream that returns the bytes pointed to by "data".</p><p>"data" remains the property of the caller but must remain valid until the stream is destroyed. If a block_size is given, calls to <a href=#ArrayInputStream.Next>Next()</a> will return data blocks no larger than the given size. Otherwise, the first call to <a href=#ArrayInputStream.Next>Next()</a> returns the entire array. block_size is mainly useful for testing; in production you would probably never want to set it.</p></div><hr><h3 id=ArrayInputStream.Next.details><code>virtual bool ArrayInputStream::Next(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size)</code></h3><div style=margin-left:16px><p>Obtains a chunk of data from the stream.</p><p>Preconditions:</p><ul><li>"size" and "data" are not NULL.</li></ul><p>Postconditions:</p><ul><li>If the returned value is false, there is no more data to return or an error occurred. All errors are permanent.</li><li>Otherwise, "size" points to the actual number of bytes read and "data" points to a pointer to a buffer containing these bytes.</li><li>Ownership of this buffer remains with the stream, and the buffer remains valid only until some other method of the stream is called or the stream is destroyed.</li><li>It is legal for the returned buffer to have zero size, as long as repeatedly calling <a href=#ArrayInputStream.Next>Next()</a> eventually yields a buffer with non-zero size.</li></ul></div><hr><h3 id=ArrayInputStream.BackUp.details><code>virtual void ArrayInputStream::BackUp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Backs up a number of bytes, so that the next call to <a href=#ArrayInputStream.Next>Next()</a> returns data again that was already returned by the last call to <a href=#ArrayInputStream.Next>Next()</a>.</p><p>This is useful when writing procedures that are only supposed to read up to a certain point in the input, then return. If <a href=#ArrayInputStream.Next>Next()</a> returns a buffer that goes beyond what you wanted to read, you can use <a href=#ArrayInputStream.BackUp>BackUp()</a> to return to the point where you intended to finish.</p><p>Preconditions:</p><ul><li>The last method called must have been <a href=#ArrayInputStream.Next>Next()</a>.</li><li>count must be less than or equal to the size of the last buffer returned by <a href=#ArrayInputStream.Next>Next()</a>.</li></ul><p>Postconditions:</p><ul><li>The last "count" bytes of the last buffer returned by <a href=#ArrayInputStream.Next>Next()</a> will be pushed back into the stream. Subsequent calls to <a href=#ArrayInputStream.Next>Next()</a> will return the same data again before producing new data.</li></ul></div><hr><h3 id=ArrayInputStream.Skip.details><code>virtual bool ArrayInputStream::Skip(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Skips a number of bytes.</p><p>Returns false if the end of the stream is reached or some input error occurred. In the end-of-stream case, the stream is advanced to the end of the stream (so <a href=#ArrayInputStream.ByteCount>ByteCount()</a> will return the total size of the stream).</p></div><h2 id=ArrayOutputStream>class ArrayOutputStream: public <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a></h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl_lite.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> backed by an in-memory array of bytes.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=ArrayOutputStream.ArrayOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>ArrayOutputStream</b>(void * data, int size, int block_size = -1)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Create an OutputStream that writes to the bytes pointed to by "data". <a href=#ArrayOutputStream.ArrayOutputStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=ArrayOutputStream.~ArrayOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>~ArrayOutputStream</b>()</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=ArrayOutputStream.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>(void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Obtains a buffer into which data can be written. <a href=#ArrayOutputStream.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=ArrayOutputStream.BackUp><div style=padding-left:16px;text-indent:-16px><code><b>BackUp</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Backs up a number of bytes, so that the end of the last buffer returned by <a href=#ArrayOutputStream.Next>Next()</a> is not actually written. <a href=#ArrayOutputStream.BackUp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int64_t</code></td><td style=border-left-width:0 id=ArrayOutputStream.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes written since this object was created.</div></td></tr></table><hr><h3 id=ArrayOutputStream.ArrayOutputStream.details><code>ArrayOutputStream::ArrayOutputStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void * data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int block_size = -1)</code></h3><div style=margin-left:16px><p>Create an OutputStream that writes to the bytes pointed to by "data".</p><p>"data" remains the property of the caller but must remain valid until the stream is destroyed. If a block_size is given, calls to <a href=#ArrayOutputStream.Next>Next()</a> will return data blocks no larger than the given size. Otherwise, the first call to <a href=#ArrayOutputStream.Next>Next()</a> returns the entire array. block_size is mainly useful for testing; in production you would probably never want to set it.</p></div><hr><h3 id=ArrayOutputStream.Next.details><code>virtual bool ArrayOutputStream::Next(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size)</code></h3><div style=margin-left:16px><p>Obtains a buffer into which data can be written.</p><p>Any data written into this buffer will eventually (maybe instantly, maybe later on) be written to the output.</p><p>Preconditions:</p><ul><li>"size" and "data" are not NULL.</li></ul><p>Postconditions:</p><ul><li>If the returned value is false, an error occurred. All errors are permanent.</li><li>Otherwise, "size" points to the actual number of bytes in the buffer and "data" points to the buffer.</li><li>Ownership of this buffer remains with the stream, and the buffer remains valid only until some other method of the stream is called or the stream is destroyed.</li><li>Any data which the caller stores in this buffer will eventually be written to the output (unless <a href=#ArrayOutputStream.BackUp>BackUp()</a> is called).</li><li>It is legal for the returned buffer to have zero size, as long as repeatedly calling <a href=#ArrayOutputStream.Next>Next()</a> eventually yields a buffer with non-zero size.</li></ul></div><hr><h3 id=ArrayOutputStream.BackUp.details><code>virtual void ArrayOutputStream::BackUp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Backs up a number of bytes, so that the end of the last buffer returned by <a href=#ArrayOutputStream.Next>Next()</a> is not actually written.</p><p>This is needed when you finish writing all the data you want to write, but the last buffer was bigger than you needed. You don't want to write a bunch of garbage after the end of your data, so you use <a href=#ArrayOutputStream.BackUp>BackUp()</a> to back up.</p><p>Preconditions:</p><ul><li>The last method called must have been <a href=#ArrayOutputStream.Next>Next()</a>.</li><li>count must be less than or equal to the size of the last buffer returned by <a href=#ArrayOutputStream.Next>Next()</a>.</li><li>The caller must not have written anything to the last "count" bytes of that buffer.</li></ul><p>Postconditions:</p><ul><li>The last "count" bytes of the last buffer returned by <a href=#ArrayOutputStream.Next>Next()</a> will be ignored.</li></ul></div><h2 id=StringOutputStream>class StringOutputStream: public <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a></h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl_lite.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> which appends bytes to a string.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=StringOutputStream.StringOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>StringOutputStream</b>(std::string * target)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Create a <a href=#StringOutputStream>StringOutputStream</a> which appends bytes to the given string. <a href=#StringOutputStream.StringOutputStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=StringOutputStream.~StringOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>~StringOutputStream</b>()</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=StringOutputStream.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>(void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Obtains a buffer into which data can be written. <a href=#StringOutputStream.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=StringOutputStream.BackUp><div style=padding-left:16px;text-indent:-16px><code><b>BackUp</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Backs up a number of bytes, so that the end of the last buffer returned by <a href=#StringOutputStream.Next>Next()</a> is not actually written. <a href=#StringOutputStream.BackUp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int64_t</code></td><td style=border-left-width:0 id=StringOutputStream.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes written since this object was created.</div></td></tr></table><hr><h3 id=StringOutputStream.StringOutputStream.details><code>explicit StringOutputStream::StringOutputStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * target)</code></h3><div style=margin-left:16px><p>Create a <a href=#StringOutputStream>StringOutputStream</a> which appends bytes to the given string.</p><p>The string remains property of the caller, but it is mutated in arbitrary ways and MUST NOT be accessed in any way until you're done with the stream. Either be sure there's no further usage, or (safest) destroy the stream before using the contents.</p><p>Hint: If you call target->reserve(n) before creating the stream, the first call to <a href=#StringOutputStream.Next>Next()</a> will return at least n bytes of buffer space.</p></div><hr><h3 id=StringOutputStream.Next.details><code>virtual bool StringOutputStream::Next(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size)</code></h3><div style=margin-left:16px><p>Obtains a buffer into which data can be written.</p><p>Any data written into this buffer will eventually (maybe instantly, maybe later on) be written to the output.</p><p>Preconditions:</p><ul><li>"size" and "data" are not NULL.</li></ul><p>Postconditions:</p><ul><li>If the returned value is false, an error occurred. All errors are permanent.</li><li>Otherwise, "size" points to the actual number of bytes in the buffer and "data" points to the buffer.</li><li>Ownership of this buffer remains with the stream, and the buffer remains valid only until some other method of the stream is called or the stream is destroyed.</li><li>Any data which the caller stores in this buffer will eventually be written to the output (unless <a href=#StringOutputStream.BackUp>BackUp()</a> is called).</li><li>It is legal for the returned buffer to have zero size, as long as repeatedly calling <a href=#StringOutputStream.Next>Next()</a> eventually yields a buffer with non-zero size.</li></ul></div><hr><h3 id=StringOutputStream.BackUp.details><code>virtual void StringOutputStream::BackUp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Backs up a number of bytes, so that the end of the last buffer returned by <a href=#StringOutputStream.Next>Next()</a> is not actually written.</p><p>This is needed when you finish writing all the data you want to write, but the last buffer was bigger than you needed. You don't want to write a bunch of garbage after the end of your data, so you use <a href=#StringOutputStream.BackUp>BackUp()</a> to back up.</p><p>Preconditions:</p><ul><li>The last method called must have been <a href=#StringOutputStream.Next>Next()</a>.</li><li>count must be less than or equal to the size of the last buffer returned by <a href=#StringOutputStream.Next>Next()</a>.</li><li>The caller must not have written anything to the last "count" bytes of that buffer.</li></ul><p>Postconditions:</p><ul><li>The last "count" bytes of the last buffer returned by <a href=#StringOutputStream.Next>Next()</a> will be ignored.</li></ul></div><h2 id=CopyingInputStream>class CopyingInputStream</h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl_lite.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A generic traditional input stream interface.</p><p>Lots of traditional input streams (e.g. file descriptors, C stdio streams, and C++ iostreams) expose an interface where every read involves copying bytes into a buffer. If you want to take such an interface and make a <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> based on it, simply implement <a href=#CopyingInputStream>CopyingInputStream</a> and then use <a href=#CopyingInputStreamAdaptor>CopyingInputStreamAdaptor</a>.</p><p><a href=#CopyingInputStream>CopyingInputStream</a> implementations should avoid buffering if possible. <a href=#CopyingInputStreamAdaptor>CopyingInputStreamAdaptor</a> does its own buffering and will read data in large blocks.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=CopyingInputStream.~CopyingInputStream><div style=padding-left:16px;text-indent:-16px><code><b>~CopyingInputStream</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int</code></td><td style=border-left-width:0 id=CopyingInputStream.Read><div style=padding-left:16px;text-indent:-16px><code><b>Read</b>(void * buffer, int size) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reads up to "size" bytes into the given buffer. <a href=#CopyingInputStream.Read.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int</code></td><td style=border-left-width:0 id=CopyingInputStream.Skip><div style=padding-left:16px;text-indent:-16px><code><b>Skip</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Skips the next "count" bytes of input. <a href=#CopyingInputStream.Skip.details>more...</a></div></td></tr></table><hr><h3 id=CopyingInputStream.Read.details><code>virtual int CopyingInputStream::Read(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void * buffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size) = 0</code></h3><div style=margin-left:16px><p>Reads up to "size" bytes into the given buffer.</p><p>Returns the number of bytes read. <a href=#CopyingInputStream.Read>Read()</a> waits until at least one byte is available, or returns zero if no bytes will ever become available (EOF), or -1 if a permanent read error occurred.</p></div><hr><h3 id=CopyingInputStream.Skip.details><code>virtual int CopyingInputStream::Skip(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Skips the next "count" bytes of input.</p><p>Returns the number of bytes actually skipped. This will always be exactly equal to "count" unless EOF was reached or a permanent read error occurred.</p><p>The default implementation just repeatedly calls <a href=#CopyingInputStream.Read>Read()</a> into a scratch buffer.</p></div><h2 id=CopyingInputStreamAdaptor>class CopyingInputStreamAdaptor: public <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a></h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl_lite.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> which reads from a <a href=#CopyingInputStream>CopyingInputStream</a>.</p><p>This is useful for implementing ZeroCopyInputStreams that read from traditional streams. Note that this class is not really zero-copy.</p><p>If you want to read from file descriptors or C++ istreams, this is already implemented for you: use <a href=google.protobuf.io.zero_copy_stream_impl#FileInputStream>FileInputStream</a> or <a href=google.protobuf.io.zero_copy_stream_impl#IstreamInputStream>IstreamInputStream</a> respectively.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=CopyingInputStreamAdaptor.CopyingInputStreamAdaptor><div style=padding-left:16px;text-indent:-16px><code><b>CopyingInputStreamAdaptor</b>(<a href=#CopyingInputStream>CopyingInputStream</a> * copying_stream, int block_size = -1)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Creates a stream that reads from the given <a href=#CopyingInputStream>CopyingInputStream</a>. <a href=#CopyingInputStreamAdaptor.CopyingInputStreamAdaptor.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=CopyingInputStreamAdaptor.~CopyingInputStreamAdaptor><div style=padding-left:16px;text-indent:-16px><code><b>~CopyingInputStreamAdaptor</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CopyingInputStreamAdaptor.SetOwnsCopyingStream><div style=padding-left:16px;text-indent:-16px><code><b>SetOwnsCopyingStream</b>(bool value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Call SetOwnsCopyingStream(true) to tell the <a href=#CopyingInputStreamAdaptor>CopyingInputStreamAdaptor</a> to delete the underlying <a href=#CopyingInputStream>CopyingInputStream</a> when it is destroyed.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=CopyingInputStreamAdaptor.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>(const void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Obtains a chunk of data from the stream. <a href=#CopyingInputStreamAdaptor.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=CopyingInputStreamAdaptor.BackUp><div style=padding-left:16px;text-indent:-16px><code><b>BackUp</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Backs up a number of bytes, so that the next call to <a href=#CopyingInputStreamAdaptor.Next>Next()</a> returns data again that was already returned by the last call to <a href=#CopyingInputStreamAdaptor.Next>Next()</a>. <a href=#CopyingInputStreamAdaptor.BackUp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=CopyingInputStreamAdaptor.Skip><div style=padding-left:16px;text-indent:-16px><code><b>Skip</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Skips a number of bytes. <a href=#CopyingInputStreamAdaptor.Skip.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int64_t</code></td><td style=border-left-width:0 id=CopyingInputStreamAdaptor.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes read since this object was created.</div></td></tr></table><hr><h3 id=CopyingInputStreamAdaptor.CopyingInputStreamAdaptor.details><code>explicit CopyingInputStreamAdaptor::CopyingInputStreamAdaptor(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=#CopyingInputStream>CopyingInputStream</a> * copying_stream,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int block_size = -1)</code></h3><div style=margin-left:16px><p>Creates a stream that reads from the given <a href=#CopyingInputStream>CopyingInputStream</a>.</p><p>If a block_size is given, it specifies the number of bytes that should be read and returned with each call to <a href=#CopyingInputStreamAdaptor.Next>Next()</a>. Otherwise, a reasonable default is used. The caller retains ownership of copying_stream unless SetOwnsCopyingStream(true) is called.</p></div><hr><h3 id=CopyingInputStreamAdaptor.Next.details><code>virtual bool CopyingInputStreamAdaptor::Next(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size)</code></h3><div style=margin-left:16px><p>Obtains a chunk of data from the stream.</p><p>Preconditions:</p><ul><li>"size" and "data" are not NULL.</li></ul><p>Postconditions:</p><ul><li>If the returned value is false, there is no more data to return or an error occurred. All errors are permanent.</li><li>Otherwise, "size" points to the actual number of bytes read and "data" points to a pointer to a buffer containing these bytes.</li><li>Ownership of this buffer remains with the stream, and the buffer remains valid only until some other method of the stream is called or the stream is destroyed.</li><li>It is legal for the returned buffer to have zero size, as long as repeatedly calling <a href=#CopyingInputStreamAdaptor.Next>Next()</a> eventually yields a buffer with non-zero size.</li></ul></div><hr><h3 id=CopyingInputStreamAdaptor.BackUp.details><code>virtual void CopyingInputStreamAdaptor::BackUp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Backs up a number of bytes, so that the next call to <a href=#CopyingInputStreamAdaptor.Next>Next()</a> returns data again that was already returned by the last call to <a href=#CopyingInputStreamAdaptor.Next>Next()</a>.</p><p>This is useful when writing procedures that are only supposed to read up to a certain point in the input, then return. If <a href=#CopyingInputStreamAdaptor.Next>Next()</a> returns a buffer that goes beyond what you wanted to read, you can use <a href=#CopyingInputStreamAdaptor.BackUp>BackUp()</a> to return to the point where you intended to finish.</p><p>Preconditions:</p><ul><li>The last method called must have been <a href=#CopyingInputStreamAdaptor.Next>Next()</a>.</li><li>count must be less than or equal to the size of the last buffer returned by <a href=#CopyingInputStreamAdaptor.Next>Next()</a>.</li></ul><p>Postconditions:</p><ul><li>The last "count" bytes of the last buffer returned by <a href=#CopyingInputStreamAdaptor.Next>Next()</a> will be pushed back into the stream. Subsequent calls to <a href=#CopyingInputStreamAdaptor.Next>Next()</a> will return the same data again before producing new data.</li></ul></div><hr><h3 id=CopyingInputStreamAdaptor.Skip.details><code>virtual bool CopyingInputStreamAdaptor::Skip(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Skips a number of bytes.</p><p>Returns false if the end of the stream is reached or some input error occurred. In the end-of-stream case, the stream is advanced to the end of the stream (so <a href=#CopyingInputStreamAdaptor.ByteCount>ByteCount()</a> will return the total size of the stream).</p></div><h2 id=CopyingOutputStream>class CopyingOutputStream</h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl_lite.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A generic traditional output stream interface.</p><p>Lots of traditional output streams (e.g. file descriptors, C stdio streams, and C++ iostreams) expose an interface where every write involves copying bytes from a buffer. If you want to take such an interface and make a <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> based on it, simply implement <a href=#CopyingOutputStream>CopyingOutputStream</a> and then use <a href=#CopyingOutputStreamAdaptor>CopyingOutputStreamAdaptor</a>.</p><p><a href=#CopyingOutputStream>CopyingOutputStream</a> implementations should avoid buffering if possible. <a href=#CopyingOutputStreamAdaptor>CopyingOutputStreamAdaptor</a> does its own buffering and will write data in large blocks.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=CopyingOutputStream.~CopyingOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>~CopyingOutputStream</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=CopyingOutputStream.Write><div style=padding-left:16px;text-indent:-16px><code><b>Write</b>(const void * buffer, int size) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Writes "size" bytes from the given buffer to the output. <a href=#CopyingOutputStream.Write.details>more...</a></div></td></tr></table><hr><h3 id=CopyingOutputStream.Write.details><code>virtual bool CopyingOutputStream::Write(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void * buffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size) = 0</code></h3><div style=margin-left:16px><p>Writes "size" bytes from the given buffer to the output.</p><p>Returns true if successful, false on a write error.</p></div><h2 id=CopyingOutputStreamAdaptor>class CopyingOutputStreamAdaptor: public <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a></h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl_lite.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> which writes to a <a href=#CopyingOutputStream>CopyingOutputStream</a>.</p><p>This is useful for implementing ZeroCopyOutputStreams that write to traditional streams. Note that this class is not really zero-copy.</p><p>If you want to write to file descriptors or C++ ostreams, this is already implemented for you: use <a href=google.protobuf.io.zero_copy_stream_impl#FileOutputStream>FileOutputStream</a> or <a href=google.protobuf.io.zero_copy_stream_impl#OstreamOutputStream>OstreamOutputStream</a> respectively.</p><p>Known subclasses:</p><ul><li><code><a href=google.protobuf.io.zero_copy_stream_impl#FileOutputStream>FileOutputStream</a></code></li></ul><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=CopyingOutputStreamAdaptor.CopyingOutputStreamAdaptor><div style=padding-left:16px;text-indent:-16px><code><b>CopyingOutputStreamAdaptor</b>(<a href=#CopyingOutputStream>CopyingOutputStream</a> * copying_stream, int block_size = -1)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Creates a stream that writes to the given Unix file descriptor. <a href=#CopyingOutputStreamAdaptor.CopyingOutputStreamAdaptor.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=CopyingOutputStreamAdaptor.~CopyingOutputStreamAdaptor><div style=padding-left:16px;text-indent:-16px><code><b>~CopyingOutputStreamAdaptor</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CopyingOutputStreamAdaptor.Flush><div style=padding-left:16px;text-indent:-16px><code><b>Flush</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Writes all pending data to the underlying stream. <a href=#CopyingOutputStreamAdaptor.Flush.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CopyingOutputStreamAdaptor.SetOwnsCopyingStream><div style=padding-left:16px;text-indent:-16px><code><b>SetOwnsCopyingStream</b>(bool value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Call SetOwnsCopyingStream(true) to tell the <a href=#CopyingOutputStreamAdaptor>CopyingOutputStreamAdaptor</a> to delete the underlying <a href=#CopyingOutputStream>CopyingOutputStream</a> when it is destroyed.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=CopyingOutputStreamAdaptor.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>(void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Obtains a buffer into which data can be written. <a href=#CopyingOutputStreamAdaptor.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=CopyingOutputStreamAdaptor.BackUp><div style=padding-left:16px;text-indent:-16px><code><b>BackUp</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Backs up a number of bytes, so that the end of the last buffer returned by <a href=#CopyingOutputStreamAdaptor.Next>Next()</a> is not actually written. <a href=#CopyingOutputStreamAdaptor.BackUp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int64_t</code></td><td style=border-left-width:0 id=CopyingOutputStreamAdaptor.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes written since this object was created.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=CopyingOutputStreamAdaptor.WriteAliasedRaw><div style=padding-left:16px;text-indent:-16px><code><b>WriteAliasedRaw</b>(const void * data, int size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Write a given chunk of data to the output. <a href=#CopyingOutputStreamAdaptor.WriteAliasedRaw.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=CopyingOutputStreamAdaptor.AllowsAliasing><div style=padding-left:16px;text-indent:-16px><code><b>AllowsAliasing</b>() const</code></div></td></tr></table><hr><h3 id=CopyingOutputStreamAdaptor.CopyingOutputStreamAdaptor.details><code>explicit CopyingOutputStreamAdaptor::CopyingOutputStreamAdaptor(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=#CopyingOutputStream>CopyingOutputStream</a> * copying_stream,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int block_size = -1)</code></h3><div style=margin-left:16px><p>Creates a stream that writes to the given Unix file descriptor.</p><p>If a block_size is given, it specifies the size of the buffers that should be returned by <a href=#CopyingOutputStreamAdaptor.Next>Next()</a>. Otherwise, a reasonable default is used.</p></div><hr><h3 id=CopyingOutputStreamAdaptor.Flush.details><code>bool CopyingOutputStreamAdaptor::Flush()</code></h3><div style=margin-left:16px><p>Writes all pending data to the underlying stream.</p><p>Returns false if a write error occurred on the underlying stream. (The underlying stream itself is not necessarily flushed.)</p></div><hr><h3 id=CopyingOutputStreamAdaptor.Next.details><code>virtual bool CopyingOutputStreamAdaptor::Next(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size)</code></h3><div style=margin-left:16px><p>Obtains a buffer into which data can be written.</p><p>Any data written into this buffer will eventually (maybe instantly, maybe later on) be written to the output.</p><p>Preconditions:</p><ul><li>"size" and "data" are not NULL.</li></ul><p>Postconditions:</p><ul><li>If the returned value is false, an error occurred. All errors are permanent.</li><li>Otherwise, "size" points to the actual number of bytes in the buffer and "data" points to the buffer.</li><li>Ownership of this buffer remains with the stream, and the buffer remains valid only until some other method of the stream is called or the stream is destroyed.</li><li>Any data which the caller stores in this buffer will eventually be written to the output (unless <a href=#CopyingOutputStreamAdaptor.BackUp>BackUp()</a> is called).</li><li>It is legal for the returned buffer to have zero size, as long as repeatedly calling <a href=#CopyingOutputStreamAdaptor.Next>Next()</a> eventually yields a buffer with non-zero size.</li></ul></div><hr><h3 id=CopyingOutputStreamAdaptor.BackUp.details><code>virtual void CopyingOutputStreamAdaptor::BackUp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Backs up a number of bytes, so that the end of the last buffer returned by <a href=#CopyingOutputStreamAdaptor.Next>Next()</a> is not actually written.</p><p>This is needed when you finish writing all the data you want to write, but the last buffer was bigger than you needed. You don't want to write a bunch of garbage after the end of your data, so you use <a href=#CopyingOutputStreamAdaptor.BackUp>BackUp()</a> to back up.</p><p>Preconditions:</p><ul><li>The last method called must have been <a href=#CopyingOutputStreamAdaptor.Next>Next()</a>.</li><li>count must be less than or equal to the size of the last buffer returned by <a href=#CopyingOutputStreamAdaptor.Next>Next()</a>.</li><li>The caller must not have written anything to the last "count" bytes of that buffer.</li></ul><p>Postconditions:</p><ul><li>The last "count" bytes of the last buffer returned by <a href=#CopyingOutputStreamAdaptor.Next>Next()</a> will be ignored.</li></ul></div><hr><h3 id=CopyingOutputStreamAdaptor.WriteAliasedRaw.details><code>virtual bool CopyingOutputStreamAdaptor::WriteAliasedRaw(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void * data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size)</code></h3><div style=margin-left:16px><p>Write a given chunk of data to the output.</p><p>Some output streams may implement this in a way that avoids copying. Check AllowsAliasing() before calling <a href=#CopyingOutputStreamAdaptor.WriteAliasedRaw>WriteAliasedRaw()</a>. It will GOOGLE_CHECK fail if <a href=#CopyingOutputStreamAdaptor.WriteAliasedRaw>WriteAliasedRaw()</a> is called on a stream that does not allow aliasing.</p><p>NOTE: It is caller's responsibility to ensure that the chunk of memory remains live until all of the data has been consumed from the stream.</p></div><h2 id=LimitingInputStream>class LimitingInputStream: public <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a></h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl_lite.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> which wraps some other stream and limits it to a particular byte count.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=LimitingInputStream.LimitingInputStream><div style=padding-left:16px;text-indent:-16px><code><b>LimitingInputStream</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> * input, int64 limit)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=LimitingInputStream.~LimitingInputStream><div style=padding-left:16px;text-indent:-16px><code><b>~LimitingInputStream</b>()</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=LimitingInputStream.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>(const void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Obtains a chunk of data from the stream. <a href=#LimitingInputStream.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=LimitingInputStream.BackUp><div style=padding-left:16px;text-indent:-16px><code><b>BackUp</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Backs up a number of bytes, so that the next call to <a href=#LimitingInputStream.Next>Next()</a> returns data again that was already returned by the last call to <a href=#LimitingInputStream.Next>Next()</a>. <a href=#LimitingInputStream.BackUp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=LimitingInputStream.Skip><div style=padding-left:16px;text-indent:-16px><code><b>Skip</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Skips a number of bytes. <a href=#LimitingInputStream.Skip.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int64_t</code></td><td style=border-left-width:0 id=LimitingInputStream.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes read since this object was created.</div></td></tr></table><hr><h3 id=LimitingInputStream.Next.details><code>virtual bool LimitingInputStream::Next(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size)</code></h3><div style=margin-left:16px><p>Obtains a chunk of data from the stream.</p><p>Preconditions:</p><ul><li>"size" and "data" are not NULL.</li></ul><p>Postconditions:</p><ul><li>If the returned value is false, there is no more data to return or an error occurred. All errors are permanent.</li><li>Otherwise, "size" points to the actual number of bytes read and "data" points to a pointer to a buffer containing these bytes.</li><li>Ownership of this buffer remains with the stream, and the buffer remains valid only until some other method of the stream is called or the stream is destroyed.</li><li>It is legal for the returned buffer to have zero size, as long as repeatedly calling <a href=#LimitingInputStream.Next>Next()</a> eventually yields a buffer with non-zero size.</li></ul></div><hr><h3 id=LimitingInputStream.BackUp.details><code>virtual void LimitingInputStream::BackUp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Backs up a number of bytes, so that the next call to <a href=#LimitingInputStream.Next>Next()</a> returns data again that was already returned by the last call to <a href=#LimitingInputStream.Next>Next()</a>.</p><p>This is useful when writing procedures that are only supposed to read up to a certain point in the input, then return. If <a href=#LimitingInputStream.Next>Next()</a> returns a buffer that goes beyond what you wanted to read, you can use <a href=#LimitingInputStream.BackUp>BackUp()</a> to return to the point where you intended to finish.</p><p>Preconditions:</p><ul><li>The last method called must have been <a href=#LimitingInputStream.Next>Next()</a>.</li><li>count must be less than or equal to the size of the last buffer returned by <a href=#LimitingInputStream.Next>Next()</a>.</li></ul><p>Postconditions:</p><ul><li>The last "count" bytes of the last buffer returned by <a href=#LimitingInputStream.Next>Next()</a> will be pushed back into the stream. Subsequent calls to <a href=#LimitingInputStream.Next>Next()</a> will return the same data again before producing new data.</li></ul></div><hr><h3 id=LimitingInputStream.Skip.details><code>virtual bool LimitingInputStream::Skip(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Skips a number of bytes.</p><p>Returns false if the end of the stream is reached or some input error occurred. In the end-of-stream case, the stream is advanced to the end of the stream (so <a href=#LimitingInputStream.ByteCount>ByteCount()</a> will return the total size of the stream).</p></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/protocol-buffers aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li></ul><script type=text/javascript id=cookiebanner src=https://cdn.jsdelivr.net/gh/dobarkod/cookie-banner@1.2.2/dist/cookiebanner.min.js data-height=50px data-message="Protobuf.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic." data-bg=#ffb data-fg=#000 data-position=bottom data-padding="10px 16px" data-close-text="OK, got it" data-font-size=18px data-moreinfo=https://policies.google.com/technologies/cookies></script></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/protocolbuffers/protobuf aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://groups.google.com/g/protobuf aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul><script type=text/javascript id=cookiebanner src=https://cdn.jsdelivr.net/gh/dobarkod/cookie-banner@1.2.2/dist/cookiebanner.min.js data-height=50px data-message="Protobuf.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic." data-bg=#ffb data-fg=#000 data-position=bottom data-padding="10px 16px" data-close-text="OK, got it" data-font-size=18px data-moreinfo=https://policies.google.com/technologies/cookies></script></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2025 Google LLC All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></small>
<span class=text-white>Hosted by GitHub Pages.</span> <a href=https://docs.github.com/en/site-policy/privacy-policies/github-privacy-statement target=_blank>GitHub Privacy Statement</a></div></div></div></footer></div><script src=/js/main.min.c91cdfdcc1576ecc360abc6f1c3ca0485d047f65ac6d3203ec57ed29e0af808b.js integrity="sha256-yRzf3MFXbsw2CrxvHDygSF0Ef2WsbTID7FftKeCvgIs=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>