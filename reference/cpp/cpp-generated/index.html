<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>C++ Generated Code Guide | Protocol Buffers Documentation</title>
<meta name=description content="Describes exactly what C++ code the protocol buffer compiler generates for any given protocol definition."><meta property="og:title" content="C++ Generated Code Guide"><meta property="og:description" content="Describes exactly what C++ code the protocol buffer compiler generates for any given protocol definition. "><meta property="og:type" content="article"><meta property="og:url" content="https://protobuf.dev/reference/cpp/cpp-generated/"><meta property="article:section" content="reference"><meta itemprop=name content="C++ Generated Code Guide"><meta itemprop=description content="Describes exactly what C++ code the protocol buffer compiler generates for any given protocol definition. "><meta itemprop=wordCount content="7624"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="C++ Generated Code Guide"><meta name=twitter:description content="Describes exactly what C++ code the protocol buffer compiler generates for any given protocol definition. "><link rel=preload href=/scss/main.min.27bc098c9a8f7a1246d474f5c8afcee53760c9c7f38125d343ff52e0bf493011.css as=style integrity="sha256-J7wJjJqPehJG1HT1yK/O5TdgycfzgSXTQ/9S4L9JMBE=" crossorigin=anonymous><link href=/scss/main.min.27bc098c9a8f7a1246d474f5c8afcee53760c9c7f38125d343ff52e0bf493011.css rel=stylesheet integrity="sha256-J7wJjJqPehJG1HT1yK/O5TdgycfzgSXTQ/9S4L9JMBE=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-5L8P8GRN4Y"></script><script>var doNotTrack=!1,dnt;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-5L8P8GRN4Y")}</script></head><body class=td-page><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>Protocol Buffers Documentation</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav></ul></div><div class="d-none d-lg-block"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="td-sidebar-nav collapse td-sidebar-nav--search-disabled" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m--li><a href=/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-><span>Protocol Buffers</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-overview-li><a href=/overview/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-overview><span>Overview</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-installation-li><a href=/installation/ title="Protocol Buffer Compiler Installation" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-installation><span>Protoc Installation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-news-li><a href=/news/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-news><span>News</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-programming-guides-li><a href=/programming-guides/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-programming-guides><span>Programming Guides</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guideseditions-li><a href=/programming-guides/editions/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guideseditions><span>Language Guide (editions)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesproto2-li><a href=/programming-guides/proto2/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesproto2><span>Language Guide (proto 2)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesproto3-li><a href=/programming-guides/proto3/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesproto3><span>Language Guide (proto 3)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesproto-limits-li><a href=/programming-guides/proto-limits/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesproto-limits><span>Proto Limits</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesstyle-li><a href=/programming-guides/style/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesstyle><span>Style Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesenum-li><a href=/programming-guides/enum/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesenum><span>Enum Behavior</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesencoding-li><a href=/programming-guides/encoding/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesencoding><span>Encoding</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesjson-li><a href=/programming-guides/json/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesjson><span>ProtoJSON Format</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidestechniques-li><a href=/programming-guides/techniques/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidestechniques><span>Techniques</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesaddons-li><a href=/programming-guides/addons/ title="Third-Party Add-ons" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesaddons><span>Add-ons</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesextension_declarations-li><a href=/programming-guides/extension_declarations/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesextension_declarations><span>Extension Declarations</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesfield_presence-li><a href=/programming-guides/field_presence/ title="Application Note: Field Presence" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesfield_presence><span>Field Presence</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesserialization-not-canonical-li><a href=/programming-guides/serialization-not-canonical/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesserialization-not-canonical><span>Proto Serialization Is Not Canonical</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesdeserialize-debug-li><a href=/programming-guides/deserialize-debug/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesdeserialize-debug><span>Deserializing Debug Proto Representations</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-editions-li><a href=/editions/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-editions><span>Protobuf Editions</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-editionsoverview-li><a href=/editions/overview/ title="Protobuf Editions Overview" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-editionsoverview><span>Overview</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-editionsfeatures-li><a href=/editions/features/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-editionsfeatures><span>Feature Settings for Editions</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-editionsimplementation-li><a href=/editions/implementation/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-editionsimplementation><span>Implementing Editions Support</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-design-decisions-li><a href=/design-decisions/ title="Protobuf Team Design Decisions" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-design-decisions><span>Design Decisions</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-design-decisionsnullable-getters-setters-li><a href=/design-decisions/nullable-getters-setters/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-design-decisionsnullable-getters-setters><span>No Nullable Setters/Getters Support</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-best-practices-li><a href=/best-practices/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-best-practices><span>Proto Best Practices</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-best-practicesno-cargo-cults-li><a href=/best-practices/no-cargo-cults/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-best-practicesno-cargo-cults><span>Avoid Cargo Culting</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-best-practicesdos-donts-li><a href=/best-practices/dos-donts/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-best-practicesdos-donts><span>Proto Best Practices</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-best-practicesapi-li><a href=/best-practices/api/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-best-practicesapi><span>API Best Practices</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-best-practices1-1-1-li><a href=/best-practices/1-1-1/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-best-practices1-1-1><span>1-1-1 Best Practice</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-getting-started-li><a href=/getting-started/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-getting-started><span>Tutorials</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedcpptutorial-li><a href=/getting-started/cpptutorial/ title="Protocol Buffer Basics: C++" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedcpptutorial><span>C++</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedcsharptutorial-li><a href=/getting-started/csharptutorial/ title="Protocol Buffer Basics: C#" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedcsharptutorial><span>C#</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-starteddarttutorial-li><a href=/getting-started/darttutorial/ title="Protocol Buffer Basics: Dart" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-starteddarttutorial><span>Dart</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedgotutorial-li><a href=/getting-started/gotutorial/ title="Protocol Buffer Basics: Go" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedgotutorial><span>Go</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedjavatutorial-li><a href=/getting-started/javatutorial/ title="Protocol Buffer Basics: Java" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedjavatutorial><span>Java</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedkotlintutorial-li><a href=/getting-started/kotlintutorial/ title="Protocol Buffer Basics: Kotlin" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedkotlintutorial><span>Kotlin</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedpythontutorial-li><a href=/getting-started/pythontutorial/ title="Protocol Buffer Basics: Python" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedpythontutorial><span>Python</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-reference-li><a href=/reference/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-reference><span>Reference Guides</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-referencecpp-li><a href=/reference/cpp/ title="C++ Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referencecpp><span>C++</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-referencecppcpp-generated-li><a href=/reference/cpp/cpp-generated/ title="C++ Generated Code Guide" class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-referencecppcpp-generated><span class=td-sidebar-nav-active-item>Generated Code Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencecppstring-view-li><a href=/reference/cpp/string-view/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencecppstring-view><span>String View APIs</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencecpparenas-li><a href=/reference/cpp/arenas/ title="C++ Arena Allocation Guide" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencecpparenas><span>Arena Allocation Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencecppabseil-li><a href=/reference/cpp/abseil/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencecppabseil><span>Abseil Support</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencecppapi-docs-link-li><a href=/reference/cpp/api-docs/ target=_blank rel=noopener class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencecppapi-docs-link><span>C++ API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencecsharp-li><a href=/reference/csharp/ title="C# Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referencecsharp><span>C#</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencecsharpcsharp-generated-li><a href=/reference/csharp/csharp-generated/ title="C# Generated Code Guide" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencecsharpcsharp-generated><span>Generated Code Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencecsharpapi-docs-link-li><a href=/reference/csharp/api-docs target=_blank rel=noopener class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencecsharpapi-docs-link><span>C# API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencedart-li><a href=/reference/dart/ title="Dart Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referencedart><span>Dart</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencedartdart-generated-li><a href=/reference/dart/dart-generated/ title="Dart Generated Code" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencedartdart-generated><span>Generated Code</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencedartapi-docs-link-li><a href=https://pub.dartlang.org/documentation/protobuf target=_blank rel=noopener class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencedartapi-docs-link><span>Dart API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencego-li><a href=/reference/go/ title="Go Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referencego><span>Go</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencegogo-generated-li><a href=/reference/go/go-generated/ title="Go Generated Code Guide (Open)" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencegogo-generated><span>Generated Code Guide (Open)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencegogo-generated-opaque-li><a href=/reference/go/go-generated-opaque/ title="Go Generated Code Guide (Opaque)" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencegogo-generated-opaque><span>Generated Code Guide (Opaque)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencegofaq-li><a href=/reference/go/faq/ title="Go FAQ" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencegofaq><span>FAQ</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencegosize-li><a href=/reference/go/size/ title="Go Size Semantics" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencegosize><span>Size Semantics</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencegoapi-docs-link-li><a href=https://pkg.go.dev/google.golang.org/protobuf/proto target=_blank rel=noopener class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencegoapi-docs-link><span>Go API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencegoopaque-migration-li><a href=/reference/go/opaque-migration/ title="Go Opaque API Migration" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencegoopaque-migration><span>Opaque API Migration</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencegoopaque-migration-manual-li><a href=/reference/go/opaque-migration-manual/ title="Go Opaque API: Manual Migration" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencegoopaque-migration-manual><span>Opaque API: Manual Migration</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencegoopaque-faq-li><a href=/reference/go/opaque-faq/ title="Go Opaque API FAQ" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencegoopaque-faq><span>Opaque API FAQ</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencejava-li><a href=/reference/java/ title="Java Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referencejava><span>Java</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencejavajava-generated-li><a href=/reference/java/java-generated/ title="Java Generated Code Guide" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencejavajava-generated><span>Generated Code Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencejavajava-proto-names-li><a href=/reference/java/java-proto-names/ title="Java Proto Names" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencejavajava-proto-names><span>Generated Proto Names</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencejavaapi-docs-link-li><a href=/reference/java/api-docs/overview-summary.html target=_blank rel=noopener class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencejavaapi-docs-link><span>Java API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencekotlin-li><a href=/reference/kotlin/ title="Kotlin Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referencekotlin><span>Kotlin</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencekotlinapi-docs-li><a href=/reference/kotlin/api-docs/ title="Kotlin Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referencekotlinapi-docs><span>Kotlin</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencekotlinkotlin-generated-li><a href=/reference/kotlin/kotlin-generated/ title="Kotlin Generated Code Guide" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencekotlinkotlin-generated><span>Generated Code Guide</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referenceobjective-c-li><a href=/reference/objective-c/ title="Objective-C Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referenceobjective-c><span>Objective-C</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceobjective-cobjective-c-generated-li><a href=/reference/objective-c/objective-c-generated/ title="Objective-C Generated Code Guide" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referenceobjective-cobjective-c-generated><span>Generated Code Guide</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencephp-li><a href=/reference/php/ title="PHP Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referencephp><span>PHP</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencephpphp-generated-li><a href=/reference/php/php-generated/ title="PHP Generated Code Guide" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencephpphp-generated><span>Generated Code Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencephpapi-docs-link-li><a href=/reference/php/api-docs/ target=_blank rel=noopener class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencephpapi-docs-link><span>PHP API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencepython-li><a href=/reference/python/ title="Python Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referencepython><span>Python</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencepythonpython-generated-li><a href=/reference/python/python-generated/ title="Python Generated Code Guide" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencepythonpython-generated><span>Generated Code Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencepythonapi-docs-link-li><a href=https://googleapis.dev/python/protobuf/latest/ target=_blank rel=noopener class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencepythonapi-docs-link><span>Python API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referenceruby-li><a href=/reference/ruby/ title="Ruby Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referenceruby><span>Ruby</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencerubyruby-generated-li><a href=/reference/ruby/ruby-generated/ title="Ruby Generated Code Guide" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referencerubyruby-generated><span>Generated Code Guide</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referenceprotobuf-li><a href=/reference/protobuf/ title="Protocol Buffers Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-referenceprotobuf><span>Protocol Buffers</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceprotobufedition-2023-spec-li><a href=/reference/protobuf/edition-2023-spec/ title="Protocol Buffers Edition 2023 Language Specification" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referenceprotobufedition-2023-spec><span>2023 Language Specification</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceprotobufproto2-spec-li><a href=/reference/protobuf/proto2-spec/ title="Protocol Buffers Version 2 Language Specification" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referenceprotobufproto2-spec><span>Version 2 Language Specification</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceprotobufproto3-spec-li><a href=/reference/protobuf/proto3-spec/ title="Protocol Buffers Version 3 Language Specification" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referenceprotobufproto3-spec><span>Version 3 Language Specification</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceprotobuftextformat-spec-li><a href=/reference/protobuf/textformat-spec/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referenceprotobuftextformat-spec><span>Text Format Language Specification</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceprotobufgoogleprotobuf-li><a href=/reference/protobuf/google.protobuf/ title="Protocol Buffers Well-Known Types" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referenceprotobufgoogleprotobuf><span>Well-Known Types</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceother-li><a href=/reference/other/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-referenceother><span>Other Languages</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-support-li><a href=/support/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-support><span>Support</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-supportversion-support-li><a href=/support/version-support/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-supportversion-support><span>Version Support</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-supportmigration-li><a href=/support/migration/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-supportmigration><span>Migration Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-supportcross-version-runtime-guarantee-li><a href=/support/cross-version-runtime-guarantee/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-supportcross-version-runtime-guarantee><span>Cross-Version Runtime Guarantee</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-downloads-li><a href=/downloads/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-downloads><span>Downloads</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-history-li><a href=/history/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-history><span>History</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-forum-link-li><a href=https://groups.google.com/g/protobuf target=_blank rel=noopener class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-forum-link><span>Forum</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-navbar-li><a href=/navbar/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-navbar><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-search-li><a href=/search/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-search><span>Search Results</span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/protocolbuffers/protocolbuffers.github.io/tree/main/content/reference/cpp/cpp-generated.md class=td-page-meta--view target=_blank rel=noopener><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
<a href=https://github.com/protocolbuffers/protocolbuffers.github.io/edit/main/content/reference/cpp/cpp-generated.md class=td-page-meta--edit target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
<a href="https://github.com/protocolbuffers/protocolbuffers.github.io/new/main/content/reference/cpp/cpp-generated.md?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class=td-page-meta--child target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
<a href="https://github.com/protocolbuffers/protocolbuffers.github.io/issues/new?title=C++%20Generated%20Code%20Guide" class=td-page-meta--issue target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/protocolbuffers/protobuf/issues/new class=td-page-meta--project-issue target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#invocation>Compiler Invocation</a></li><li><a href=#package>Packages</a></li><li><a href=#message>Messages</a><ul><li><a href=#generated-filenames>Generated Filenames</a></li><li><a href=#nested-types>Nested Types</a></li></ul></li><li><a href=#fields>Fields</a><ul><li><a href=#numeric>Optional Numeric Fields (proto2 and proto3)</a></li><li><a href=#implicit-numeric>Implicit Presence Numeric Fields (proto3)</a></li><li><a href=#string>Optional String/Bytes Fields (proto2 and proto3)</a></li><li><a href=#implicit-string>Implicit Presence String/Bytes Fields (proto3)</a></li><li><a href=#cord>Singular Bytes Fields with Cord Support</a></li><li><a href=#enum_field>Optional Enum Fields (proto2 and proto3)</a></li><li><a href=#implicit-enum>Implicit Presence Enum Fields (proto3)</a></li><li><a href=#embeddedmessage>Optional Embedded Message Fields (proto2 and proto3)</a></li><li><a href=#repeatednumeric>Repeated Numeric Fields</a></li><li><a href=#repeatedstring>Repeated String Fields</a></li><li><a href=#repeated_enum>Repeated Enum Fields</a></li><li><a href=#repeatedmessage>Repeated Embedded Message Fields</a></li><li><a href=#oneof-numeric>Oneof Numeric Fields</a></li><li><a href=#oneof-string>Oneof String Fields</a></li><li><a href=#oneof-enum>Oneof Enum Fields</a></li><li><a href=#oneof-embedded>Oneof Embedded Message Fields</a></li><li><a href=#map>Map Fields</a></li></ul></li><li><a href=#any>Any</a></li><li><a href=#oneof>Oneof</a></li><li><a href=#enum>Enumerations</a></li><li><a href=#extension>Extensions (proto2 only)</a></li><li><a href=#arena>Arena Allocation</a></li><li><a href=#service>Services</a><ul><li><a href=#interface>Interface</a></li><li><a href=#stub>Stub</a></li></ul></li><li><a href=#plugins>Plugin Insertion Points</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/reference/>Reference Guides</a></li><li class=breadcrumb-item><a href=/reference/cpp/>C++</a></li><li class="breadcrumb-item active" aria-current=page>Generated Code Guide</li></ol></nav><div class=td-content><h1>C++ Generated Code Guide</h1><div class=lead>Describes exactly what C++ code the protocol buffer compiler generates for any given protocol definition.</div><header class=article-meta></header><p>Any differences between proto2 and proto3 generated code are highlighted - note
that these differences are in the generated code as described in this document,
not the base message classes/interfaces, which are the same in both versions.
You should read the
<a href=/programming-guides/proto2>proto2 language guide</a>
and/or
<a href=/programming-guides/proto3>proto3 language guide</a>
before reading this document.</p><h2 id=invocation>Compiler Invocation</h2><p>The protocol buffer compiler produces C++ output when invoked with the
<code>--cpp_out=</code> command-line flag. The parameter to the <code>--cpp_out=</code> option is the
directory where you want the compiler to write your C++ output. The compiler
creates a header file and an implementation file for each <code>.proto</code> file input.
The names of the output files are computed by taking the name of the <code>.proto</code>
file and making two changes:</p><ul><li>The extension (<code>.proto</code>) is replaced with either <code>.pb.h</code> or <code>.pb.cc</code> for the
header or implementation file, respectively.</li><li>The proto path (specified with the <code>--proto_path=</code> or <code>-I</code> command-line
flag) is replaced with the output path (specified with the <code>--cpp_out=</code>
flag).</li></ul><p>So, for example, let&rsquo;s say you invoke the compiler as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>protoc --proto_path<span style=color:#ce5c00;font-weight:700>=</span>src --cpp_out<span style=color:#ce5c00;font-weight:700>=</span>build/gen src/foo.proto src/bar/baz.proto
</span></span></code></pre></div><p>The compiler will read the files <code>src/foo.proto</code> and <code>src/bar/baz.proto</code> and
produce four output files: <code>build/gen/foo.pb.h</code>, <code>build/gen/foo.pb.cc</code>,
<code>build/gen/bar/baz.pb.h</code>, <code>build/gen/bar/baz.pb.cc</code>. The compiler will
automatically create the directory <code>build/gen/bar</code> if necessary, but it will
<em>not</em> create <code>build</code> or <code>build/gen</code>; they must already exist.</p><h2 id=package>Packages</h2><p>If a <code>.proto</code> file contains a <code>package</code> declaration, the entire contents of the
file will be placed in a corresponding C++ namespace. For example, given the
<code>package</code> declaration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>All declarations in the file will reside in the <code>foo::bar</code> namespace.</p><h2 id=message>Messages</h2><p>Given a simple message declaration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler generates a class called <code>Foo</code>, which publicly
derives from
<a href=/reference/cpp/api-docs/google.protobuf.message><code>google::protobuf::Message</code></a>.
The class is a concrete class; no pure-virtual methods are left unimplemented.
Methods that are virtual in <code>Message</code> but not pure-virtual may or may not be
overridden by <code>Foo</code>, depending on the optimization mode. By default, <code>Foo</code>
implements specialized versions of all methods for maximum speed. However, if
the <code>.proto</code> file contains the line:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>optimize_for</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>CODE_SIZE</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>then <code>Foo</code> will override only the minimum set of methods necessary to function
and rely on reflection-based implementations of the rest. This significantly
reduces the size of the generated code, but also reduces performance.
Alternatively, if the <code>.proto</code> file contains:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>optimize_for</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>LITE_RUNTIME</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>then <code>Foo</code> will include fast implementations of all methods, but will implement
the
<a href=/reference/cpp/api-docs/google.protobuf.message_lite><code>google::protobuf::MessageLite</code></a>
interface, which only contains a subset of the methods of <code>Message</code>. In
particular, it does not support descriptors or reflection. However, in this
mode, the generated code only needs to link against <code>libprotobuf-lite.so</code>
(<code>libprotobuf-lite.lib</code> on Windows) instead of <code>libprotobuf.so</code>
(<code>libprotobuf.lib</code>). The &ldquo;lite&rdquo; library is much smaller than the full library,
and is more appropriate for resource-constrained systems such as mobile phones.</p><p>You should <em>not</em> create your own <code>Foo</code> subclasses. If you subclass this class
and override a virtual method, the override may be ignored, as many generated
method calls are de-virtualized to improve performance.</p><p>The <code>Message</code> interface defines methods that let you check, manipulate, read, or
write the entire message, including parsing from and serializing to binary
strings.</p><ul><li><code>bool ParseFromString(::absl::string_view data)</code>: Parse the message from the
given serialized binary string (also known as wire format).</li><li><code>bool SerializeToString(string* output) const</code>: Serialize the given message
to a binary string.</li><li><code>string DebugString()</code>: Return a string giving the <code>text_format</code>
representation of the proto (should only be used for debugging).</li></ul><p>In addition to these methods, the <code>Foo</code> class defines the following methods:</p><ul><li><code>Foo()</code>: Default constructor.</li><li><code>~Foo()</code>: Default destructor.</li><li><code>Foo(const Foo& other)</code>: Copy constructor.</li><li><code>Foo(Foo&& other)</code>: Move constructor.</li><li><code>Foo& operator=(const Foo& other)</code>: Assignment operator.</li><li><code>Foo& operator=(Foo&& other)</code>: Move-assignment operator.</li><li><code>void Swap(Foo* other)</code>: Swap content with another message.</li><li><code>const UnknownFieldSet& unknown_fields() const</code>: Returns the set of unknown
fields encountered while parsing this message. If <code>option optimize_for = LITE_RUNTIME</code> is specified in the <code>.proto</code> file, then the return type
changes to <code>std::string&</code>.</li><li><code>UnknownFieldSet* mutable_unknown_fields()</code>: Returns a pointer to the
mutable set of unknown fields encountered while parsing this message. If
<code>option optimize_for = LITE_RUNTIME</code> is specified in the <code>.proto</code> file, then
the return type changes to <code>std::string*</code>.</li></ul><p><strong>Note:</strong> The copy constructor and assignment operator perform a deep copy of
the message data. This ensures that each message object owns and manages its own
copy of the data, preventing issues like double frees or use-after-free errors.
This behavior is consistent with standard C++ practice for objects that own
their data, such as <code>std::vector</code>. For developers coming from languages with
different copy semantics (such as JavaScript or TypeScript, where shallow copies
might be more common), it is important to note that modifications to a copied
message will not affect the original message, and vice-versa.</p><p>The class also defines the following static methods:</p><ul><li><code>static const Descriptor* descriptor()</code>: Returns the type&rsquo;s descriptor. This
contains information about the type, including what fields it has and what
their types are. This can be used with
<a href=/reference/cpp/api-docs/google.protobuf.message#Reflection>reflection</a>
to inspect fields programmatically.</li><li><code>static const Foo& default_instance()</code>: Returns a const singleton instance
of <code>Foo</code> which is identical to a newly-constructed instance of <code>Foo</code> (so all
singular fields are unset and all repeated fields are empty). Note that the
default instance of a message can be used as a factory by calling its
<code>New()</code> method.</li></ul><h3 id=generated-filenames>Generated Filenames</h3><p><a href=https://github.com/protocolbuffers/protobuf/blob/main/src/google/protobuf/compiler/cpp/helpers.cc#L4>Reserved keywords</a>
are appended with an underscore in the generated output.</p><p>For example, the following proto3 definition syntax:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>MyMessage</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>string</span> <span style=color:#204a87;font-weight:700>false</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>myFalse</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>generates the following partial output:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>clear_false_</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>false_</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>set_false_</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Arg_</span><span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#000>arg</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Args_</span><span style=color:#000;font-weight:700>...</span> <span style=color:#000>args</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>mutable_false_</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#000>PROTOBUF_NODISCARD</span> <span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>release_false_</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>set_allocated_false_</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>ptr</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>clear_myfalse</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>myfalse</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>set_myfalse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Arg_</span><span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#000>arg</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Args_</span><span style=color:#000;font-weight:700>...</span> <span style=color:#000>args</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>mutable_myfalse</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#000>PROTOBUF_NODISCARD</span> <span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>release_myfalse</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>set_allocated_myfalse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>ptr</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><h3 id=nested-types>Nested Types</h3><p>A message can be declared inside another message. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In this case, the compiler generates two classes: <code>Foo</code> and <code>Foo_Bar</code>. In
addition, the compiler generates a typedef inside <code>Foo</code> as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>Foo_Bar</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><p>This means that you can use the nested type&rsquo;s class as if it was the nested
class <code>Foo::Bar</code>. However, note that C++ does not allow nested types to be
forward-declared. If you want to forward-declare <code>Bar</code> in another file and use
that declaration, you must identify it as <code>Foo_Bar</code>.</p><h2 id=fields>Fields</h2><p>In addition to the methods described in the previous section, the protocol
buffer compiler generates a set of accessor methods for each field defined
within the message in the <code>.proto</code> file. These methods are in
lower-case/snake-case, such as <code>has_foo()</code> and <code>clear_foo()</code>.</p><p>As well as accessor methods, the compiler generates an integer constant for each
field containing its field number. The constant name is the letter <code>k</code>, followed
by the field name converted to camel-case, followed by <code>FieldNumber</code>. For
example, given the field <code>optional int32 foo_bar = 5;</code>, the compiler will
generate the constant <code>static const int kFooBarFieldNumber = 5;</code>.</p><p>For field accessors returning a <code>const</code> reference, that reference may be
invalidated when the next modifying access is made to the message. This includes
calling any non-<code>const</code> accessor of any field, calling any non-<code>const</code> method
inherited from <code>Message</code> or modifying the message through other ways (for
example, by using the message as the argument of <code>Swap()</code>). Correspondingly, the
address of the returned reference is only guaranteed to be the same across
different invocations of the accessor if no modifying access was made to the
message in the meantime.</p><p>For field accessors returning a pointer, that pointer may be invalidated when
the next modifying or non-modifying access is made to the message. This
includes, regardless of constness, calling any accessor of any field, calling
any method inherited from <code>Message</code> or accessing the message through other ways
(for example, by copying the message using the copy constructor).
Correspondingly, the value of the returned pointer is never guaranteed to be the
same across two different invocations of the accessor.</p><h3 id=numeric>Optional Numeric Fields (proto2 and proto3)</h3><p>For either of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_foo() const</code>: Returns <code>true</code> if the field is set.</li><li><code>int32 foo() const</code>: Returns the current value of the field. If the field is
not set, returns the default value.</li><li><code>void set_foo(int32 value)</code>: Sets the value of the field. After calling
this, <code>has_foo()</code> will return <code>true</code> and <code>foo()</code> will return <code>value</code>.</li><li><code>void clear_foo()</code>: Clears the value of the field. After calling this,
<code>has_foo()</code> will return <code>false</code> and <code>foo()</code> will return the default value.</li></ul><p>For other numeric field types (including <code>bool</code>), <code>int32</code> is replaced with the
corresponding C++ type according to the
<a href=/programming-guides/proto3#scalar>scalar value types table</a>.</p><h3 id=implicit-numeric>Implicit Presence Numeric Fields (proto3)</h3><p>For the below field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>  <span style=color:#8f5902;font-style:italic>// no field label specified, defaults to implicit presence.
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>int32 foo() const</code>: Returns the current value of the field. If the field is
not set, returns 0.</li><li><code>void set_foo(int32 value)</code>: Sets the value of the field. After calling
this, <code>foo()</code> will return <code>value</code>.</li><li><code>void clear_foo()</code>: Clears the value of the field. After calling this,
<code>foo()</code> will return 0.</li></ul><p>For other numeric field types (including <code>bool</code>), <code>int32</code> is replaced with the
corresponding C++ type according to the
<a href=/programming-guides/proto3#scalar>scalar value types table</a>.</p><h3 id=string>Optional String/Bytes Fields (proto2 and proto3)</h3><p><strong>Note:</strong> As of edition 2023, if
<a href=/editions/features#string_type><code>features.(pb.cpp).string_type</code></a>
is set to <code>VIEW</code>,
<a href=/reference/cpp/string-view#singular-view>string_view</a>
APIs will be generated instead.</p><p>For any of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_foo() const</code>: Returns <code>true</code> if the field is set.</li><li><code>const string& foo() const</code>: Returns the current value of the field. If the
field is not set, returns the default value.</li><li><code>void set_foo(::absl::string_view value)</code>: Sets the value of the field.
After calling this, <code>has_foo()</code> will return <code>true</code> and <code>foo()</code> will return a
copy of <code>value</code>.</li><li><code>void set_foo(const string& value)</code>: Sets the value of the field. After
calling this, <code>has_foo()</code> will return <code>true</code> and <code>foo()</code> will return a copy
of <code>value</code>.</li><li><code>void set_foo(string&& value)</code>: Sets the value of the field, moving from the
passed string. After calling this, <code>has_foo()</code> will return <code>true</code> and
<code>foo()</code> will return a copy of <code>value</code>.</li><li><code>void set_foo(const char* value)</code>: Sets the value of the field using a
C-style null-terminated string. After calling this, <code>has_foo()</code> will return
<code>true</code> and <code>foo()</code> will return a copy of <code>value</code>.</li><li><code>void set_foo(const char* value, int size)</code>: Sets the value of the field
using a string with an explicit size specified, rather than determined by
looking for a null-terminator byte. After calling this, <code>has_foo()</code> will
return <code>true</code> and <code>foo()</code> will return a copy of <code>value</code>.</li><li><code>string* mutable_foo()</code>: Returns a pointer to the mutable <code>string</code> object
that stores the field&rsquo;s value. If the field was not set prior to the call,
then the returned string will be empty (<em>not</em> the default value). After
calling this, <code>has_foo()</code> will return <code>true</code> and <code>foo()</code> will return
whatever value is written into the given string.</li><li><code>void clear_foo()</code>: Clears the value of the field. After calling this,
<code>has_foo()</code> will return <code>false</code> and <code>foo()</code> will return the default value.</li><li><code>void set_allocated_foo(string* value)</code>:
Sets the <code>string</code>
object to the field and frees the previous field value if it exists. If the
<code>string</code> pointer is not <code>NULL</code>, the message takes ownership of the allocated
<code>string</code> object and <code>has_foo()</code> will return <code>true</code>. The message is free to
delete the allocated <code>string</code> object at any time, so references to the
object may be invalidated. Otherwise, if the <code>value</code> is <code>NULL</code>, the behavior
is the same as calling <code>clear_foo()</code>.</li><li><code>string* release_foo()</code>:
Releases the
ownership of the field and returns the pointer of the <code>string</code> object. After
calling this, caller takes the ownership of the allocated <code>string</code> object,
<code>has_foo()</code> will return <code>false</code>, and <code>foo()</code> will return the default value.</li></ul><p><a id=proto3_string></a></p><h3 id=implicit-string>Implicit Presence String/Bytes Fields (proto3)</h3><p><strong>Note:</strong> As of edition 2023, if
<a href=/editions/features#string_type><code>features.(pb.cpp).string_type</code></a>
is set to <code>VIEW</code>,
<a href=/reference/cpp/string-view#singular-view>string_view</a>
APIs will be generated instead.</p><p>For either of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>  <span style=color:#8f5902;font-style:italic>// no field label specified, defaults to implicit presence.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>const string& foo() const</code>: Returns the current value of the field. If the
field is not set, returns the empty string/empty bytes.</li><li><code>void set_foo(::absl::string_view value)</code>: Sets the value of the field.
After calling this, <code>foo()</code> will return a copy of <code>value</code>.</li><li><code>void set_foo(const string& value)</code>: Sets the value of the field. After
calling this, <code>foo()</code> will return a copy of <code>value</code>.</li><li><code>void set_foo(string&& value)</code>: Sets the value of the field, moving from the
passed string. After calling this, <code>foo()</code> will return a copy of <code>value</code>.</li><li><code>void set_foo(const char* value)</code>: Sets the value of the field using a
C-style null-terminated string. After calling this, <code>foo()</code> will return a
copy of <code>value</code>.</li><li><code>void set_foo(const char* value, int size)</code>: Sets the value of the field
using a string with an explicit size specified, rather than determined by
looking for a null-terminator byte. After calling this, <code>foo()</code> will return
a copy of <code>value</code>.</li><li><code>string* mutable_foo()</code>: Returns a pointer to the mutable <code>string</code> object
that stores the field&rsquo;s value. If the field was not set prior to the call,
then the returned string will be empty. After calling this, <code>foo()</code> will
return whatever value is written into the given string.</li><li><code>void clear_foo()</code>: Clears the value of the field. After calling this,
<code>foo()</code> will return the empty string/empty bytes.</li><li><code>void set_allocated_foo(string* value)</code>:
Sets the <code>string</code>
object to the field and frees the previous field value if it exists. If the
<code>string</code> pointer is not <code>NULL</code>, the message takes ownership of the allocated
<code>string</code> object. The message is free to delete the allocated <code>string</code> object
at any time, so references to the object may be invalidated. Otherwise, if
the <code>value</code> is <code>NULL</code>, the behavior is the same as calling <code>clear_foo()</code>.</li><li><code>string* release_foo()</code>:
Releases the
ownership of the field and returns the pointer of the <code>string</code> object. After
calling this, caller takes the ownership of the allocated <code>string</code> object
and <code>foo()</code> will return the empty string/empty bytes.</li></ul><h3 id=cord>Singular Bytes Fields with Cord Support</h3><p>v23.0 added support for
<a href=https://github.com/abseil/abseil-cpp/blob/master/absl/strings/cord.h><code>absl::Cord</code></a>
for singular <code>bytes</code> fields (including
<a href=#oneof-numeric><code>oneof</code> fields</a>). Singular <code>string</code>, <code>repeated string</code>, and <code>repeated bytes</code> fields do not support using <code>Cord</code>s.</p><p>To set a singular <code>bytes</code> field to store data using <code>absl::Cord</code>, use the
following syntax:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>25</span> <span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>ctype</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>CORD</span><span style=color:#000;font-weight:700>];</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>26</span> <span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>ctype</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>CORD</span><span style=color:#000;font-weight:700>];</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>Using <code>cord</code> is not available for <code>repeated bytes</code> fields. Protoc ignores
<code>[ctype=CORD]</code> settings on those fields.</p><p>The compiler will generate the following accessor methods:</p><ul><li><code>const ::absl::Cord& foo() const</code>: Returns the current value of the field.
If the field is not set, returns an empty <code>Cord</code> (proto3) or the default
value (proto2).</li><li><code>void set_foo(const ::absl::Cord& value)</code>: Sets the value of the field.
After calling this, <code>foo()</code> will return <code>value</code>.</li><li><code>void set_foo(::absl::string_view value)</code>: Sets the value of the field.
After calling this, <code>foo()</code> will return <code>value</code> as an <code>absl::Cord</code>.</li><li><code>void clear_foo()</code>: Clears the value of the field. After calling this,
<code>foo()</code> will return an empty <code>Cord</code> (proto3) or the default value (proto2).</li><li><code>bool has_foo()</code>: Returns <code>true</code> if the field is set.</li></ul><h3 id=enum_field>Optional Enum Fields (proto2 and proto3)</h3><p>Given the enum type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_UNSPECIFIED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_OTHER_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For either of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Bar</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#000>Bar</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_bar() const</code>: Returns <code>true</code> if the field is set.</li><li><code>Bar bar() const</code>: Returns the current value of the field. If the field is
not set, returns the default value.</li><li><code>void set_bar(Bar value)</code>: Sets the value of the field. After calling this,
<code>has_bar()</code> will return <code>true</code> and <code>bar()</code> will return <code>value</code>. In debug
mode (i.e. NDEBUG is not defined), if <code>value</code> does not match any of the
values defined for <code>Bar</code>, this method will abort the process.</li><li><code>void clear_bar()</code>: Clears the value of the field. After calling this,
<code>has_bar()</code> will return <code>false</code> and <code>bar()</code> will return the default value.</li></ul><h3 id=implicit-enum>Implicit Presence Enum Fields (proto3)</h3><p>Given the enum type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_UNSPECIFIED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_OTHER_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For this field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>Bar</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>  <span style=color:#8f5902;font-style:italic>// no field label specified, defaults to implicit presence.
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>Bar bar() const</code>: Returns the current value of the field. If the field is
not set, returns the default value (0).</li><li><code>void set_bar(Bar value)</code>: Sets the value of the field. After calling this,
<code>bar()</code> will return <code>value</code>.</li><li><code>void clear_bar()</code>: Clears the value of the field. After calling this,
<code>bar()</code> will return the default value.</li></ul><h3 id=embeddedmessage>Optional Embedded Message Fields (proto2 and proto3)</h3><p>Given the message type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For any of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//proto2
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Bar</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#000>Bar</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#8f5902;font-style:italic>//proto3
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>Bar</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_bar() const</code>: Returns <code>true</code> if the field is set.</li><li><code>const Bar& bar() const</code>: Returns the current value of the field. If the
field is not set, returns a <code>Bar</code> with none of its fields set (possibly
<code>Bar::default_instance()</code>).</li><li><code>Bar* mutable_bar()</code>: Returns a pointer to the mutable <code>Bar</code> object that
stores the field&rsquo;s value. If the field was not set prior to the call, then
the returned <code>Bar</code> will have none of its fields set (i.e. it will be
identical to a newly-allocated <code>Bar</code>). After calling this, <code>has_bar()</code> will
return <code>true</code> and <code>bar()</code> will return a reference to the same instance of
<code>Bar</code>.</li><li><code>void clear_bar()</code>: Clears the value of the field. After calling this,
<code>has_bar()</code> will return <code>false</code> and <code>bar()</code> will return the default value.</li><li><code>void set_allocated_bar(Bar* bar)</code>: Sets the <code>Bar</code> object to the field and
frees the previous field value if it exists. If the <code>Bar</code> pointer is not
<code>NULL</code>, the message takes ownership of the allocated <code>Bar</code> object and
<code>has_bar()</code> will return <code>true</code>. Otherwise, if the <code>Bar</code> is <code>NULL</code>, the
behavior is the same as calling <code>clear_bar()</code>.</li><li><code>Bar* release_bar()</code>: Releases the ownership of the field and returns the
pointer of the <code>Bar</code> object. After calling this, caller takes the ownership
of the allocated <code>Bar</code> object, <code>has_bar()</code> will return <code>false</code>, and <code>bar()</code>
will return the default value.</li></ul><h3 id=repeatednumeric>Repeated Numeric Fields</h3><p>For this field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>int foo_size() const</code>: Returns the number of elements currently in the
field. To check for an empty set, consider using the
<a href=/reference/cpp/api-docs/google.protobuf.repeated_field#RepeatedPtrField><code>empty()</code></a>
method in the underlying <code>RepeatedField</code> instead of this method.</li><li><code>int32 foo(int index) const</code>: Returns the element at the given zero-based
index. Calling this method with index outside of [0, foo_size()) yields
undefined behavior.</li><li><code>void set_foo(int index, int32 value)</code>: Sets the value of the element at the
given zero-based index.</li><li><code>void add_foo(int32 value)</code>: Appends a new element to the end of the field
with the given value.</li><li><code>void clear_foo()</code>: Removes all elements from the field. After calling this,
<code>foo_size()</code> will return zero.</li><li><code>const RepeatedField&lt;int32>& foo() const</code>: Returns the underlying
<a href=/reference/cpp/api-docs/google.protobuf.repeated_field#RepeatedField><code>RepeatedField</code></a>
that stores the field&rsquo;s elements. This container class provides STL-like
iterators and other methods.</li><li><code>RepeatedField&lt;int32>* mutable_foo()</code>: Returns a pointer to the underlying
mutable <code>RepeatedField</code> that stores the field&rsquo;s elements. This container
class provides STL-like iterators and other methods.</li></ul><p>For other numeric field types (including <code>bool</code>), <code>int32</code> is replaced with the
corresponding C++ type according to the
<a href=/programming-guides/proto2#scalar>scalar value types table</a>.</p><h3 id=repeatedstring>Repeated String Fields</h3><p><strong>Note:</strong> As of edition 2023, if
<a href=/editions/features#string_type><code>features.(pb.cpp).string_type</code></a>
is set to <code>VIEW</code>,
<a href=/reference/cpp/string-view#singular-view>string_view</a>
APIs will be generated instead.</p><p>For either of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>int foo_size() const</code>: Returns the number of elements currently in the
field. To check for an empty set, consider using the
<a href=/reference/cpp/api-docs/google.protobuf.repeated_field#RepeatedPtrField><code>empty()</code></a>
method in the underlying <code>RepeatedField</code> instead of this method.</li><li><code>const string& foo(int index) const</code>: Returns the element at the given
zero-based index. Calling this method with index outside of [0,
foo_size()-1] yields undefined behavior.</li><li><code>void set_foo(int index, ::absl::string_view value)</code>: Sets the value of the
element at the given zero-based index.</li><li><code>void set_foo(int index, const string& value)</code>: Sets the value of the
element at the given zero-based index.</li><li><code>void set_foo(int index, string&& value)</code>: Sets the value of the element at
the given zero-based index, moving from the passed string.</li><li><code>void set_foo(int index, const char* value)</code>: Sets the value of the element
at the given zero-based index using a C-style null-terminated string.</li><li><code>void set_foo(int index, const char* value, int size)</code>: Sets the value of
the element at the given zero-based index using a C-style string with an
explicit size specified, rather than determined by looking for a
null-terminator byte.</li><li><code>string* mutable_foo(int index)</code>: Returns a pointer to the mutable <code>string</code>
object that stores the value of the element at the given zero-based index.
Calling this method with index outside of [0, foo_size()) yields undefined
behavior.</li><li><code>void add_foo(::absl::string_view value)</code>: Appends a new element to the end
of the element at the given zero-based index.</li><li><code>void add_foo(const string& value)</code>: Appends a new element to the end of the
field with the given value.</li><li><code>void add_foo(string&& value)</code>: Appends a new element to the end of the
field, moving from the passed string.</li><li><code>void add_foo(const char* value)</code>: Appends a new element to the end of the
field using a C-style null-terminated string.</li><li><code>void add_foo(const char* value, int size)</code>: Appends a new element to the
end of the field using a string with an explicit size specified, rather than
determined by looking for a null-terminator byte.</li><li><code>string* add_foo()</code>: Adds a new empty string element to the end of the field
and returns a pointer to it.</li><li><code>void clear_foo()</code>: Removes all elements from the field. After calling this,
<code>foo_size()</code> will return zero.</li><li><code>const RepeatedPtrField&lt;string>& foo() const</code>: Returns the underlying
<a href=/reference/cpp/api-docs/google.protobuf.repeated_field#RepeatedPtrField><code>RepeatedPtrField</code></a>
that stores the field&rsquo;s elements. This container class provides STL-like
iterators and other methods.</li><li><code>RepeatedPtrField&lt;string>* mutable_foo()</code>: Returns a pointer to the
underlying mutable <code>RepeatedPtrField</code> that stores the field&rsquo;s elements. This
container class provides STL-like iterators and other methods.</li></ul><h3 id=repeated_enum>Repeated Enum Fields</h3><p>Given the enum type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_UNSPECIFIED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_OTHER_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For this field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#000>Bar</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>int bar_size() const</code>: Returns the number of elements currently in the
field. To check for an empty set, consider using the
<a href=/reference/cpp/api-docs/google.protobuf.repeated_field#RepeatedPtrField><code>empty()</code></a>
method in the underlying <code>RepeatedField</code> instead of this method.</li><li><code>Bar bar(int index) const</code>: Returns the element at the given zero-based
index. Calling this method with index outside of [0, bar_size()) yields
undefined behavior.</li><li><code>void set_bar(int index, Bar value)</code>: Sets the value of the element at the
given zero-based index. In debug mode (i.e. NDEBUG is not defined), if
<code>value</code> does not match any of the values defined for <code>Bar</code>, this method will
abort the process.</li><li><code>void add_bar(Bar value)</code>: Appends a new element to the end of the field
with the given value. In debug mode (i.e. NDEBUG is not defined), if <code>value</code>
does not match any of the values defined for <code>Bar</code>, this method will abort
the process.</li><li><code>void clear_bar()</code>: Removes all elements from the field. After calling this,
<code>bar_size()</code> will return zero.</li><li><code>const RepeatedField&lt;int>& bar() const</code>: Returns the underlying
<a href=/reference/cpp/api-docs/google.protobuf.repeated_field#RepeatedField><code>RepeatedField</code></a>
that stores the field&rsquo;s elements. This container class provides STL-like
iterators and other methods.</li><li><code>RepeatedField&lt;int>* mutable_bar()</code>: Returns a pointer to the underlying
mutable <code>RepeatedField</code> that stores the field&rsquo;s elements. This container
class provides STL-like iterators and other methods.</li></ul><h3 id=repeatedmessage>Repeated Embedded Message Fields</h3><p>Given the message type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For this field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#000>Bar</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>int bar_size() const</code>: Returns the number of elements currently in the
field. To check for an empty set, consider using the
<a href=/reference/cpp/api-docs/google.protobuf.repeated_field#RepeatedPtrField><code>empty()</code></a>
method in the underlying <code>RepeatedField</code> instead of this method.</li><li><code>const Bar& bar(int index) const</code>: Returns the element at the given
zero-based index. Calling this method with index outside of [0, bar_size())
yields undefined behavior.</li><li><code>Bar* mutable_bar(int index)</code>: Returns a pointer to the mutable <code>Bar</code> object
that stores the value of the element at the given zero-based index. Calling
this method with index outside of [0, bar_size()) yields undefined behavior.</li><li><code>Bar* add_bar()</code>: Adds a new element to the end of the field and returns a
pointer to it. The returned <code>Bar</code> is mutable and will have none of its
fields set (i.e. it will be identical to a newly-allocated <code>Bar</code>).</li><li><code>void clear_bar()</code>: Removes all elements from the field. After calling this,
<code>bar_size()</code> will return zero.</li><li><code>const RepeatedPtrField&lt;Bar>& bar() const</code>: Returns the underlying
<a href=/reference/cpp/api-docs/google.protobuf.repeated_field#RepeatedPtrField><code>RepeatedPtrField</code></a>
that stores the field&rsquo;s elements. This container class provides STL-like
iterators and other methods.</li><li><code>RepeatedPtrField&lt;Bar>* mutable_bar()</code>: Returns a pointer to the underlying
mutable <code>RepeatedPtrField</code> that stores the field&rsquo;s elements. This container
class provides STL-like iterators and other methods.</li></ul><h3 id=oneof-numeric>Oneof Numeric Fields</h3><p>For this <a href=#oneof>oneof</a> field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_foo() const</code>: Returns <code>true</code> if oneof case is <code>kFoo</code>.</li><li><code>int32 foo() const</code>: Returns the current value of the field if oneof case is
<code>kFoo</code>. Otherwise, returns the default value.</li><li><code>void set_foo(int32 value)</code>:<ul><li>If any other oneof field in the same oneof is set, calls
<code>clear_example_name()</code>.</li><li>Sets the value of this field and sets the oneof case to <code>kFoo</code>.</li><li><code>has_foo()</code> will return true, <code>foo()</code> will return <code>value</code>, and
<code>example_name_case()</code> will return <code>kFoo</code>.</li></ul></li><li><code>void clear_foo()</code>:<ul><li>Nothing will be changed if oneof case is not <code>kFoo</code>.</li><li>If oneof case is <code>kFoo</code>, clears the value of the field and oneof case.
<code>has_foo()</code> will return <code>false</code>, <code>foo()</code> will return the default value
and <code>example_name_case()</code> will return <code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li></ul><p>For other numeric field types (including <code>bool</code>),<code>int32</code> is replaced with the
corresponding C++ type according to the
<a href=/programming-guides/proto3#scalar>scalar value types table</a>.</p><h3 id=oneof-string>Oneof String Fields</h3><p><strong>Note:</strong> As of edition 2023
<a href=/reference/cpp/string-view#oneof-view>string_view</a> APIs
may be generated instead</p><p>For any of these <a href=#oneof>oneof</a> field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_foo() const</code>: Returns <code>true</code> if the oneof case is <code>kFoo</code>.</li><li><code>const string& foo() const</code>: Returns the current value of the field if the
oneof case is <code>kFoo</code>. Otherwise, returns the default value.</li><li><code>void set_foo(::absl::string_view value)</code>:<ul><li>If any other oneof field in the same oneof is set, calls
<code>clear_example_name()</code>.</li><li>Sets the value of this field and sets the oneof case to <code>kFoo</code>.</li><li><code>has_foo()</code> will return <code>true</code>, <code>foo()</code> will return a copy of <code>value</code>
and <code>example_name_case()</code> will return <code>kFoo</code>.</li></ul></li><li><code>void set_foo(const string& value)</code>: Like the first <code>set_foo()</code>, but copies
from a const string reference.</li><li><code>void set_foo(string&& value)</code>: Like the first <code>set_foo()</code>, but moving from
the passed string.</li><li><code>void set_foo(const char* value)</code>: Like the first <code>set_foo()</code>, but copies
from a C-style null-terminated string.</li><li><code>void set_foo(const char* value, int size)</code>: Like the first <code>set_foo()</code>, but
copies from a string with an explicit size specified, rather than determined
by looking for a null-terminator byte.</li><li><code>string* mutable_foo()</code>:<ul><li>If any other oneof field in the same oneof is set, calls
<code>clear_example_name()</code>.</li><li>Sets the oneof case to <code>kFoo</code> and returns a pointer to the mutable
string object that stores the field&rsquo;s value. If the oneof case was not
<code>kFoo</code> prior to the call, then the returned string will be empty (not
the default value).</li><li><code>has_foo()</code> will return <code>true</code>, <code>foo()</code> will return whatever value is
written into the given string and <code>example_name_case()</code> will return
<code>kFoo</code>.</li></ul></li><li><code>void clear_foo()</code>:<ul><li>If the oneof case is not <code>kFoo</code>, nothing will be changed .</li><li>If the oneof case is <code>kFoo</code>, frees the field and clears the oneof case .
<code>has_foo()</code> will return <code>false</code>, <code>foo()</code> will return the default value,
and <code>example_name_case()</code> will return <code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li><li><code>void set_allocated_foo(string* value)</code>:<ul><li>Calls <code>clear_example_name()</code>.</li><li>If the string pointer is not <code>NULL</code>: Sets the string object to the field
and sets the oneof case to <code>kFoo</code>. The message takes ownership of the
allocated string object, <code>has_foo()</code> will return <code>true</code> and
<code>example_name_case()</code> will return <code>kFoo</code>.</li><li>If the string pointer is <code>NULL</code>, <code>has_foo()</code> will return <code>false</code> and
<code>example_name_case()</code> will return <code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li><li><code>string* release_foo()</code>:<ul><li>Returns <code>NULL</code> if oneof case is not <code>kFoo</code>.</li><li>Clears the oneof case, releases the ownership of the field and returns
the pointer of the string object. After calling this, caller takes the
ownership of the allocated string object, <code>has_foo()</code> will return false,
<code>foo()</code> will return the default value, and <code>example_name_case()</code> will
return <code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li></ul><h3 id=oneof-enum>Oneof Enum Fields</h3><p>Given the enum type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_UNSPECIFIED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_OTHER_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For the <a href=#oneof>oneof</a> field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>Bar</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_bar() const</code>: Returns <code>true</code> if oneof case is <code>kBar</code>.</li><li><code>Bar bar() const</code>: Returns the current value of the field if oneof case is
<code>kBar</code>. Otherwise, returns the default value.</li><li><code>void set_bar(Bar value)</code>:<ul><li>If any other oneof field in the same oneof is set, calls
<code>clear_example_name()</code>.</li><li>Sets the value of this field and sets the oneof case to <code>kBar</code>.</li><li><code>has_bar()</code> will return <code>true</code>, <code>bar()</code> will return <code>value</code> and
<code>example_name_case()</code> will return <code>kBar</code>.</li><li>In debug mode (i.e. NDEBUG is not defined), if <code>value</code> does not match
any of the values defined for <code>Bar</code>, this method will abort the process.</li></ul></li><li><code>void clear_bar()</code>:<ul><li>Nothing will be changed if the oneof case is not <code>kBar</code>.</li><li>If the oneof case is <code>kBar</code>, clears the value of the field and the oneof
case. <code>has_bar()</code> will return <code>false</code>, <code>bar()</code> will return the default
value and <code>example_name_case()</code> will return <code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li></ul><h3 id=oneof-embedded>Oneof Embedded Message Fields</h3><p>Given the message type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For the <a href=#oneof>oneof</a> field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>Bar</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_bar() const</code>: Returns true if oneof case is <code>kBar</code>.</li><li><code>const Bar& bar() const</code>: Returns the current value of the field if oneof
case is <code>kBar</code>. Otherwise, returns a Bar with none of its fields set
(possibly <code>Bar::default_instance()</code>).</li><li><code>Bar* mutable_bar()</code>:<ul><li>If any other oneof field in the same oneof is set, calls
<code>clear_example_name()</code>.</li><li>Sets the oneof case to <code>kBar</code> and returns a pointer to the mutable Bar
object that stores the field&rsquo;s value. If the oneof case was not <code>kBar</code>
prior to the call, then the returned Bar will have none of its fields
set (i.e. it will be identical to a newly-allocated Bar).</li><li>After calling this, <code>has_bar()</code> will return <code>true</code>, <code>bar()</code> will return
a reference to the same instance of <code>Bar</code> and <code>example_name_case()</code> will
return <code>kBar</code>.</li></ul></li><li><code>void clear_bar()</code>:<ul><li>Nothing will be changed if the oneof case is not <code>kBar</code>.</li><li>If the oneof case equals <code>kBar</code>, frees the field and clears the oneof
case. <code>has_bar()</code> will return <code>false</code>, <code>bar()</code> will return the default
value and <code>example_name_case()</code> will return <code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li><li><code>void set_allocated_bar(Bar* bar)</code>:<ul><li>Calls <code>clear_example_name()</code>.</li><li>If the <code>Bar</code> pointer is not <code>NULL</code>: Sets the <code>Bar</code> object to the field
and sets the oneof case to <code>kBar</code>. The message takes ownership of the
allocated <code>Bar</code> object, has_bar() will return true and
<code>example_name_case()</code> will return <code>kBar</code>.</li><li>If the pointer is <code>NULL</code>, <code>has_bar()</code> will return <code>false</code> and
<code>example_name_case()</code> will return <code>EXAMPLE_NAME_NOT_SET</code>. (The behavior
is like calling <code>clear_example_name()</code>)</li></ul></li><li><code>Bar* release_bar()</code>:<ul><li>Returns <code>NULL</code> if oneof case is not <code>kBar</code>.</li><li>If the oneof case is <code>kBar</code>, clears the oneof case, releases the
ownership of the field and returns the pointer of the <code>Bar</code> object.
After calling this, caller takes the ownership of the allocated <code>Bar</code>
object, <code>has_bar()</code> will return <code>false</code>, <code>bar()</code> will return the default
value and <code>example_name_case()</code> will return <code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li></ul><h3 id=map>Map Fields</h3><p>For this map field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>weight</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>const google::protobuf::Map&lt;int32, int32>& weight();</code>: Returns an immutable
<code>Map</code>.</li><li><code>google::protobuf::Map&lt;int32, int32>* mutable_weight();</code>: Returns a mutable
<code>Map</code>.</li></ul><p>A
<a href=/reference/cpp/api-docs/google.protobuf.map><code>google::protobuf::Map</code></a>
is a special container type used in protocol buffers to store map fields. As you
can see from its interface below, it uses a commonly-used subset of <code>std::map</code>
and <code>std::unordered_map</code> methods.</p><div class="alert alert-note" role=alert><h4 class=alert-heading>Note</h4>These maps
are
unordered.</div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>template</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>typename</span> <span style=color:#000>Key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>typename</span> <span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Map</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Member types
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>Key</span> <span style=color:#000>key_type</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>T</span> <span style=color:#000>mapped_type</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>MapPair</span><span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#000>Key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>T</span> <span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>value_type</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Iterators
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>iterator</span> <span style=color:#000>begin</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#000>const_iterator</span> <span style=color:#000>begin</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>const_iterator</span> <span style=color:#000>cbegin</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>iterator</span> <span style=color:#000>end</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#000>const_iterator</span> <span style=color:#000>end</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>const_iterator</span> <span style=color:#000>cend</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Capacity
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>size</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>empty</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Element access
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#204a87;font-weight:700>operator</span><span style=color:#000;font-weight:700>[](</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>at</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>at</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Lookup
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>contains</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>count</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>const_iterator</span> <span style=color:#000>find</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>iterator</span> <span style=color:#000>find</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Modifiers
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>pair</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>iterator</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>bool</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>insert</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>value_type</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>template</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>InputIt</span><span style=color:#ce5c00;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>insert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>InputIt</span> <span style=color:#000>first</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>InputIt</span> <span style=color:#000>last</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>size_type</span> <span style=color:#000>erase</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>Key</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>iterator</span> <span style=color:#000>erase</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>const_iterator</span> <span style=color:#000>pos</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>iterator</span> <span style=color:#000>erase</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>const_iterator</span> <span style=color:#000>first</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>const_iterator</span> <span style=color:#000>last</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>clear</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Copy
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>Map</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>other</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#204a87;font-weight:700>operator</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>other</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>The easiest way to add data is to use normal map syntax, for example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>unique_ptr</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>ProtoName</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>my_enclosing_proto</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>ProtoName</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>my_enclosing_proto</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>mutable_weight</span><span style=color:#000;font-weight:700>())[</span><span style=color:#000>my_key</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>my_value</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><p><code>pair&lt;iterator, bool> insert(const value_type& value)</code> will implicitly cause a
deep copy of the <code>value_type</code> instance. The most efficient way to insert a new
value into a <code>google::protobuf::Map</code> is as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#204a87;font-weight:700>operator</span><span style=color:#000;font-weight:700>[](</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>new_key</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>new_mapped</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><h4 id=protobuf-map>Using <code>google::protobuf::Map</code> with standard maps</h4><p><code>google::protobuf::Map</code> supports the same iterator API as <code>std::map</code> and
<code>std::unordered_map</code>. If you don&rsquo;t want to use <code>google::protobuf::Map</code> directly,
you can convert a <code>google::protobuf::Map</code> to a standard map by doing the
following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>map</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>int32</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>standard_map</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>weight</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>begin</span><span style=color:#000;font-weight:700>(),</span>
</span></span><span style=display:flex><span>                                    <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>weight</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>end</span><span style=color:#000;font-weight:700>());</span>
</span></span></code></pre></div><p>Note that this will make a deep copy of the entire map.</p><p>You can also construct a <code>google::protobuf::Map</code> from a standard map as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>int32</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>weight</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>standard_map</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>begin</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#000>standard_map</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>end</span><span style=color:#000;font-weight:700>());</span>
</span></span></code></pre></div><h4 id=parsing-unknown>Parsing unknown values</h4><p>On the wire, a .proto map is equivalent to a map entry message for each
key/value pair, while the map itself is a repeated field of map entries. Like
ordinary message types, it&rsquo;s possible for a parsed map entry message to have
unknown fields: for example a field of type <code>int64</code> in a map defined as
<code>map&lt;int32, string></code>.</p><p>If there are unknown fields in the wire format of a map entry message, they will
be discarded.</p><p>If there is an unknown enum value in the wire format of a map entry message,
it&rsquo;s handled differently in proto2 and proto3. In proto2, the whole map entry
message is put into the unknown field set of the containing message. In proto3,
it is put into a map field as if it is a known enum value.</p><h2 id=any>Any</h2><p>Given an <a href=/programming-guides/proto3#any><code>Any</code></a> field
like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#4e9a06>&#34;google/protobuf/any.proto&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>ErrorStatus</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>string</span> <span style=color:#204a87;font-weight:700>message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>google.protobuf.Any</span> <span style=color:#000>details</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In our generated code, the getter for the <code>details</code> field returns an instance of
<code>google::protobuf::Any</code>. This provides the following special methods to pack and
unpack the <code>Any</code>&rsquo;s values:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Any</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span> <span style=color:#204a87;font-weight:700>public</span><span style=color:#ce5c00;font-weight:700>:</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Packs the given message into this Any using the default type URL
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// prefix “type.googleapis.com”. Returns false if serializing the message failed.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>PackFrom</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Message</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Packs the given message into this Any using the given type URL
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// prefix. Returns false if serializing the message failed.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>PackFrom</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Message</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                <span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>absl</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>string_view</span> <span style=color:#000>type_url_prefix</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Unpacks this Any to a Message. Returns false if this Any
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// represents a different protobuf type or parsing fails.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>UnpackTo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Message</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Returns true if this Any represents the given protobuf type.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>template</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>typename</span> <span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>Is</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=oneof>Oneof</h2><p>Given a oneof definition like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo_int</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo_string</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>9</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following C++ enum type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>ExampleNameCase</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>kFooInt</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>kFooString</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>9</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>EXAMPLE_NAME_NOT_SET</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>In addition, it will generate these methods:</p><ul><li><code>ExampleNameCase example_name_case() const</code>: Returns the enum indicating
which field is set. Returns <code>EXAMPLE_NAME_NOT_SET</code> if none of them is set.</li><li><code>void clear_example_name()</code>: Frees the object if the oneof field set uses a
pointer (Message or String), and sets the oneof case to
<code>EXAMPLE_NAME_NOT_SET</code>.</li></ul><h2 id=enum>Enumerations</h2><p><strong>Note:</strong> As of edition 2024, <code>string_view</code> APIs may be generated with certain
feature settings. See
<a href=/reference/cpp/string-view#enum-name>Enumeration Name Helper</a>
for more on this topic.</p><p>Given an enum definition like:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>VALUE_A</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>VALUE_B</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>VALUE_C</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1234</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler will generate a C++ enum type called <code>Foo</code> with the
same set of values. In addition, the compiler will generate the following
functions:</p><ul><li><code>const EnumDescriptor* Foo_descriptor()</code>: Returns the type&rsquo;s descriptor,
which contains information about what values this enum type defines.</li><li><code>bool Foo_IsValid(int value)</code>: Returns <code>true</code> if the given numeric value
matches one of <code>Foo</code>&rsquo;s defined values. In the above example, it would return
<code>true</code> if the input were 0, 5, or 1234.</li><li><code>const string& Foo_Name(int value)</code>: Returns the name for given numeric
value. Returns an empty string if no such value exists. If multiple values
have this number, the first one defined is returned. In the above example,
<code>Foo_Name(5)</code> would return <code>"VALUE_B"</code>.</li><li><code>bool Foo_Parse(::absl::string_view name, Foo* value)</code>: If <code>name</code> is a valid
value name for this enum, assigns that value into <code>value</code> and returns true.
Otherwise returns false. In the above example, <code>Foo_Parse("VALUE_C", &amp;some_foo)</code> would return true and set <code>some_foo</code> to 1234.</li><li><code>const Foo Foo_MIN</code>: the smallest valid value of the enum (VALUE_A in the
example).</li><li><code>const Foo Foo_MAX</code>: the largest valid value of the enum (VALUE_C in the
example).</li><li><code>const int Foo_ARRAYSIZE</code>: always defined as <code>Foo_MAX + 1</code>.</li></ul><p><strong>Be careful when casting integers to proto2 enums.</strong> If an integer is cast to a
proto2 enum value, the integer <em>must</em> be one of the valid values for that enum,
or the results may be undefined. If in doubt, use the generated <code>Foo_IsValid()</code>
function to test if the cast is valid. Setting an enum-typed field of a proto2
message to an invalid value may cause an assertion failure. If an invalid enum
value is read when parsing a proto2 message, it will be treated as an
<a href=/reference/cpp/api-docs/google.protobuf.unknown_field_set>unknown field</a>.
These semantics have been changed in proto3. It&rsquo;s safe to cast any integer to a
proto3 enum value as long as it fits into int32. Invalid enum values will also
be kept when parsing a proto3 message and returned by enum field accessors.</p><p><strong>Be careful when using proto3 enums in switch statements.</strong> Proto3 enums are
open enum types with possible values outside the range of specified symbols.
Unrecognized enum values will be kept when parsing a proto3 message and returned
by the enum field accessors. A switch statement on a proto3 enum without a
default case will not be able to catch all cases even if all the known fields
are listed. This could lead to unexpected behavior including data corruption and
runtime crashes. <strong>Always add a default case or explicitly call
<code>Foo_IsValid(int)</code> outside of the switch to handle unknown enum values.</strong></p><p>You can define an enum inside a message type. In this case, the protocol buffer
compiler generates code that makes it appear that the enum type itself was
declared nested inside the message&rsquo;s class. The <code>Foo_descriptor()</code> and
<code>Foo_IsValid()</code> functions are declared as static methods. In reality, the enum
type itself and its values are declared at the global scope with mangled names,
and are imported into the class&rsquo;s scope with a typedef and a series of constant
definitions. This is done only to get around problems with declaration ordering.
Do not depend on the mangled top-level names; pretend the enum really is nested
in the message class.</p><h2 id=extension>Extensions (proto2 only)</h2><p>Given a message with an extension range:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>extensions</span> <span style=color:#0000cf;font-weight:700>100</span> <span style=color:#204a87;font-weight:700>to</span> <span style=color:#0000cf;font-weight:700>199</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler will generate some additional methods for <code>Foo</code>:
<code>HasExtension()</code>, <code>ExtensionSize()</code>, <code>ClearExtension()</code>, <code>GetExtension()</code>,
<code>SetExtension()</code>, <code>MutableExtension()</code>, <code>AddExtension()</code>,
<code>SetAllocatedExtension()</code> and <code>ReleaseExtension()</code>. Each of these methods takes,
as its first parameter, an extension identifier (described below), which
identifies an extension field. The remaining parameters and the return value are
exactly the same as those for the corresponding accessor methods that would be
generated for a normal (non-extension) field of the same type as the extension
identifier. (<code>GetExtension()</code> corresponds to the accessors with no special
prefix.)</p><p>Given an extension definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>123</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>repeated_bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>124</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Bar</span> <span style=color:#000>message_bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>125</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For the singular extension field <code>bar</code>, the protocol buffer compiler generates
an &ldquo;extension identifier&rdquo; called <code>bar</code>, which you can use with <code>Foo</code>&rsquo;s extension
accessors to access this extension, like so:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HasExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HasExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span><span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ClearExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HasExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>));</span>
</span></span></code></pre></div><p>For the message extension field <code>message_bar</code>, if the field is not set
<code>foo.GetExtension(message_bar)</code> returns a <code>Bar</code> with none of its fields set
(possibly <code>Bar::default_instance()</code>).</p><p>Similarly, for the repeated extension field <code>repeated_bar</code>, the compiler
generates an extension identifier called <code>repeated_bar</code>, which you can also use
with <code>Foo</code>&rsquo;s extension accessors:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>for</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#000>kSize</span><span style=color:#000;font-weight:700>;</span> <span style=color:#ce5c00;font-weight:700>++</span><span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AddExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>repeated_bar</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ExtensionSize</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>repeated_bar</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000>kSize</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>for</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#000>kSize</span><span style=color:#000;font-weight:700>;</span> <span style=color:#ce5c00;font-weight:700>++</span><span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>repeated_bar</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>(The exact implementation of extension identifiers is complicated and involves
magical use of templates—however, you don&rsquo;t need to worry about how extension
identifiers work to use them.)</p><p>Extensions can be declared nested inside of another type. For example, a common
pattern is to do something like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Baz</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Baz</span> <span style=color:#000>foo_ext</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>124</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In this case, the extension identifier <code>foo_ext</code> is declared nested inside
<code>Baz</code>. It can be used as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000>Baz</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>baz</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>MutableExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Baz</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>foo_ext</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>FillInMyBaz</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>baz</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><h2 id=arena>Arena Allocation</h2><p>Arena allocation is a C++-only feature that helps you optimize your memory usage
and improve performance when working with protocol buffers. Enabling arena
allocation in your <code>.proto</code> adds additional code for working with arenas to your
C++ generated code. You can find out more about the arena allocation API in the
<a href=/reference/cpp/arenas>Arena Allocation Guide</a>.</p><h2 id=service>Services</h2><p>If the <code>.proto</code> file contains the following line:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>cc_generic_services</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>then the protocol buffer compiler will generate code based on the service
definitions found in the file as described in this section. However, the
generated code may be undesirable as it is not tied to any particular RPC
system, and thus requires more levels of indirection than code tailored to one
system. If you do NOT want this code to be generated, add this line to the file:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>cc_generic_services</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>If neither of the above lines are given, the option defaults to <code>false</code>, as
generic services are deprecated. (Note that prior to 2.4.0, the option defaults
to <code>true</code>)</p><p>RPC systems based on <code>.proto</code>-language service definitions should provide
<a href=/reference/cpp/api-docs/google.protobuf.compiler.plugin.pb>plugins</a>
to generate code appropriate for the system. These plugins are likely to require
that abstract services are disabled, so that they can generate their own classes
of the same names.</p><p>The remainder of this section describes what the protocol buffer compiler
generates when abstract services are enabled.</p><h3 id=interface>Interface</h3><p>Given a service definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>service</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>rpc</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>FooRequest</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>returns</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>FooResponse</span><span style=color:#000;font-weight:700>);</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler will generate a class <code>Foo</code> to represent this
service. <code>Foo</code> will have a virtual method for each method defined in the service
definition. In this case, the method <code>Bar</code> is defined as:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>virtual</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>RpcController</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>controller</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>FooRequest</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>request</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                 <span style=color:#000>FooResponse</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>response</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Closure</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>done</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><p>The parameters are equivalent to the parameters of <code>Service::CallMethod()</code>,
except that the <code>method</code> argument is implied and <code>request</code> and <code>response</code>
specify their exact type.</p><p>These generated methods are virtual, but not pure-virtual. The default
implementations simply call <code>controller->SetFailed()</code> with an error message
indicating that the method is unimplemented, then invoke the <code>done</code> callback.
When implementing your own service, you must subclass this generated service and
implement its methods as appropriate.</p><p><code>Foo</code> subclasses the <code>Service</code> interface. The protocol buffer compiler
automatically generates implementations of the methods of <code>Service</code> as follows:</p><ul><li><code>GetDescriptor</code>: Returns the service&rsquo;s
<a href=/reference/cpp/api-docs/google.protobuf.descriptor#ServiceDescriptor><code>ServiceDescriptor</code></a>.</li><li><code>CallMethod</code>: Determines which method is being called based on the provided
method descriptor and calls it directly, down-casting the request and
response messages objects to the correct types.</li><li><code>GetRequestPrototype</code> and <code>GetResponsePrototype</code>: Returns the default
instance of the request or response of the correct type for the given
method.</li></ul><p>The following static method is also generated:</p><ul><li><code>static ServiceDescriptor descriptor()</code>: Returns the type&rsquo;s descriptor,
which contains information about what methods this service has and what
their input and output types are.</li></ul><h3 id=stub>Stub</h3><p>The protocol buffer compiler also generates a &ldquo;stub&rdquo; implementation of every
service interface, which is used by clients wishing to send requests to servers
implementing the service. For the <code>Foo</code> service (above), the stub implementation
<code>Foo_Stub</code> will be defined. As with nested message types, a typedef is used so
that <code>Foo_Stub</code> can also be referred to as <code>Foo::Stub</code>.</p><p><code>Foo_Stub</code> is a subclass of <code>Foo</code> which also implements the following methods:</p><ul><li><code>Foo_Stub(RpcChannel* channel)</code>: Constructs a new stub which sends requests
on the given channel.</li><li><code>Foo_Stub(RpcChannel* channel, ChannelOwnership ownership)</code>: Constructs a
new stub which sends requests on the given channel and possibly owns that
channel. If <code>ownership</code> is <code>Service::STUB_OWNS_CHANNEL</code> then when the stub
object is deleted it will delete the channel as well.</li><li><code>RpcChannel* channel()</code>: Returns this stub&rsquo;s channel, as passed to the
constructor.</li></ul><p>The stub additionally implements each of the service&rsquo;s methods as a wrapper
around the channel. Calling one of the methods simply calls
<code>channel->CallMethod()</code>.</p><p>The Protocol Buffer library does not include an RPC implementation. However, it
includes all of the tools you need to hook up a generated service class to any
arbitrary RPC implementation of your choice. You need only provide
implementations of
<a href=/reference/cpp/api-docs/google.protobuf.service#RpcChannel><code>RpcChannel</code></a>
and
<a href=/reference/cpp/api-docs/google.protobuf.service#RpcController><code>RpcController</code></a>.
See the documentation for
<a href=/reference/cpp/api-docs/google.protobuf.service><code>service.h</code></a>
for more information.</p><h2 id=plugins>Plugin Insertion Points</h2><p><a href=/reference/cpp/api-docs/google.protobuf.compiler.plugin.pb>Code generator plugins</a>
which want to extend the output of the C++ code generator may insert code of the
following types using the given insertion point names. Each insertion point
appears in both the <code>.pb.cc</code> file and the <code>.pb.h</code> file unless otherwise noted.</p><ul><li><code>includes</code>: Include directives.</li><li><code>namespace_scope</code>: Declarations that belong in the file&rsquo;s package/namespace,
but not within any particular class. Appears after all other namespace-scope
code.</li><li><code>global_scope</code>: Declarations that belong at the top level, outside of the
file&rsquo;s namespace. Appears at the very end of the file.</li><li><code>class_scope:TYPENAME</code>: Member declarations that belong in a message class.
<code>TYPENAME</code> is the full proto name, e.g. <code>package.MessageType</code>. Appears after
all other public declarations in the class. This insertion point appears
only in the <code>.pb.h</code> file.</li></ul><p>Do not generate code which relies on private class members declared by the
standard code generator, as these implementation details may change in future
versions of Protocol Buffers.</p></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/protocol-buffers aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li></ul><script type=text/javascript id=cookiebanner src=https://cdn.jsdelivr.net/gh/dobarkod/cookie-banner@1.2.2/dist/cookiebanner.min.js data-height=50px data-message="Protobuf.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic." data-bg=#ffb data-fg=#000 data-position=bottom data-padding="10px 16px" data-close-text="OK, got it" data-font-size=18px data-moreinfo=https://policies.google.com/technologies/cookies></script></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/protocolbuffers/protobuf aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://groups.google.com/g/protobuf aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul><script type=text/javascript id=cookiebanner src=https://cdn.jsdelivr.net/gh/dobarkod/cookie-banner@1.2.2/dist/cookiebanner.min.js data-height=50px data-message="Protobuf.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic." data-bg=#ffb data-fg=#000 data-position=bottom data-padding="10px 16px" data-close-text="OK, got it" data-font-size=18px data-moreinfo=https://policies.google.com/technologies/cookies></script></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2025 Google LLC All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></small>
<span class=text-white>Hosted by GitHub Pages.</span> <a href=https://docs.github.com/en/site-policy/privacy-policies/github-privacy-statement target=_blank>GitHub Privacy Statement</a></div></div></div></footer></div><script src=/js/main.min.c91cdfdcc1576ecc360abc6f1c3ca0485d047f65ac6d3203ec57ed29e0af808b.js integrity="sha256-yRzf3MFXbsw2CrxvHDygSF0Ef2WsbTID7FftKeCvgIs=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>